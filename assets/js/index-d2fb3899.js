var ol=Object.defineProperty;var tl=(s,r,t)=>r in s?ol(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var Ae=(s,r,t)=>(tl(s,typeof r!="symbol"?r+"":r,t),t);import{I as C,r as U,o as b,c as q,X as e,Q as n,u as c,a as E,av as _e,aw as fe,ax as ze,i as S,A as j,a4 as ue,R as Z,P as w,V as $,W as F,S as $e,U as N,Y as se,J as re,K as G,n as al,b as K,M as nl,F as A,a8 as W,ag as Ee,$ as De,e as sl,w as rl,z as me,ay as Q,E as Fe,H as dl,D as il,ar as ul}from"./@vue-fa59abb2.js";import{E as de,a as Y,b as cl,u as we,c as ye,C as Le,d as ke,e as pl,f as H,g as _l,h as Me,i as fl,j as je,k as ml,l as vl,m as hl,n as bl,o as gl,w as He,p as Vl,q as yl,r as We,s as $l,t as xe,v as El,x as ve,y as Ce,z as Pe,A as Ue,B as Re,D as he,F as Ie,G as Ge,H as wl,I as kl,J as xl,K as Cl,L as Pl,M as Ul,N as Rl}from"./element-plus-ce7ab288.js";import{B as qe,Q as Ke,R as Ye,S as Je,T as Il,U as ql,a as Qe,V as Tl,W as Sl,o as Ol,X as Nl,c as Al,Y as Fl,A as Xe,P as Bl}from"./@element-plus-cba4eff8.js";import{n as ee,m as le}from"./@vueuse-159cba4b.js";import{a as zl}from"./axios-21b846bc.js";import{j as Dl}from"./lodash-es-21c98b27.js";import{c as Ll}from"./vite-plugin-mock-3ea673a4.js";import"./@sxzz-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f21ac596.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-593301b5.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";import"./mockjs-07179472.js";import"./path-to-regexp-31db6522.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const i of d.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function t(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(a){if(a.ep)return;a.ep=!0;const d=t(a);fetch(a.href,d)}})();const Te=s=>(_e("data-v-e5f31a23"),s=s(),fe(),s),Ml={class:"add-but"},jl={class:"node-select"},Hl=Te(()=>E("span",null,"审批人",-1)),Wl=Te(()=>E("span",null,"抄送人",-1)),Gl=Te(()=>E("span",null,"互斥分支",-1)),Kl=C({__name:"index",emits:["addNode"],setup(s,{emit:r}){const t=U(),l=()=>{var i;r("addNode","approval"),(i=t.value)==null||i.hide()},a=()=>{var i;r("addNode","cc"),(i=t.value)==null||i.hide()},d=()=>{var i;r("addNode","exclusive"),(i=t.value)==null||i.hide()};return(i,h)=>{const v=de,m=Y,k=cl;return b(),q("div",Ml,[e(k,{placement:"bottom-start",ref_key:"nodePopoverRef",ref:t,trigger:"click",title:"添加节点",width:235},{reference:n(()=>[e(m,{icon:c(qe),type:"primary",style:{"z-index":"1"},circle:""},null,8,["icon"])]),default:n(()=>[E("div",jl,[E("div",{onClick:l},[e(v,{color:"#ff943e"},{default:n(()=>[e(c(Ke))]),_:1}),Hl]),E("div",{onClick:a},[e(v,{color:"#3296fa"},{default:n(()=>[e(c(Ye))]),_:1}),Wl]),E("div",{onClick:d},[e(v,null,{default:n(()=>[e(c(Je))]),_:1}),Gl])])]),_:1},512)])}}});const O=(s,r)=>{const t=s.__vccOpts||s;for(const[l,a]of r)t[l]=a;return t},Ze=O(Kl,[["__scopeId","data-v-e5f31a23"]]),Yl={class:"node-box"},Jl={class:"head"},Ql={key:2},Xl=C({__name:"index",props:{icon:{},node:{},color:{},readOnly:{type:Boolean,default:!1},close:{type:Boolean,default:!0},arrow:{type:Boolean,default:!0},errorInfo:{default:()=>({showError:!1,message:""})}},emits:["update:node"],setup(s,{emit:r}){const t=s;ze(p=>({f13798a2:m.value,"78d01a3e":v.value,f023673c:p.color}));const l={list:Tl,stamp:Ke,share:Je,promotion:Ye},{node:a}=ee(t,r),d=U(!1),i=U(),h=we(),v=S(()=>ye[h.value||"default"]+205+"px"),m=S(()=>ye[h.value||"default"]+60+"px"),{addNode:k,delNode:x,openPenal:R}=j("nodeHooks"),P=()=>{t.readOnly||R(a.value)},u=()=>{t.readOnly||(d.value=!0,al(()=>{var p;(p=i.value)==null||p.focus()}))},o=()=>{d.value&&(d.value=!1)};return(p,_)=>{const f=de,g=pl,y=H,I=Y,T=_l,J=Me;return b(),q("div",Yl,[e(J,{shadow:"always",onClick:_[5]||(_[5]=L=>P()),class:G(["node",{"error-node":t.errorInfo.showError}])},{header:n(()=>[E("div",Jl,[d.value?(b(),q("div",{key:0,onClick:_[2]||(_[2]=ue(()=>{},["stop"]))},[Z(e(c(ke),{ref_key:"inputRef",ref:i,onBlur:o,maxlength:"30",modelValue:c(a).name,"onUpdate:modelValue":_[1]||(_[1]=L=>c(a).name=L)},null,8,["modelValue"]),[[c(Le),o]])])):(b(),w(y,{key:1,tag:"b",truncated:"",onClick:ue(u,["stop"])},{default:n(()=>[$(F(c(a).name)+" ",1),e(f,null,{default:n(()=>[e(c(Il))]),_:1})]),_:1},8,["onClick"])),p.icon?(b(),q("span",Ql,[e(f,{size:30,color:"node-icon"},{default:n(()=>[(b(),w($e(l[p.icon.toLowerCase()])))]),_:1})])):N("",!0)])]),default:n(()=>[e(g,{placement:"top-start"},{content:n(()=>[$(F(t.errorInfo.message),1)]),default:n(()=>[Z(e(f,{class:"warn-icon",size:20},{default:n(()=>[e(c(ql),{onClick:_[0]||(_[0]=ue(()=>{},["stop"]))})]),_:1},512),[[se,t.errorInfo.showError]])]),_:1}),E("div",{onClick:_[4]||(_[4]=ue(()=>{},["stop"]))},[e(T,{title:"您确定要删除该节点吗？",width:"200","hide-after":0,placement:"right-start",onConfirm:_[3]||(_[3]=L=>c(x)(c(a)))},{reference:n(()=>[Z(e(I,{class:"node-close",plain:"",circle:"",icon:c(Qe),size:"small",type:"danger"},null,8,["icon"]),[[se,p.close&&!p.readOnly]])]),_:1})]),re(p.$slots,"default",{},void 0,!0)]),_:3},8,["class"]),e(Ze,{onAddNode:_[6]||(_[6]=L=>c(k)(L,c(a)))})])}}});const be=O(Xl,[["__scopeId","data-v-280b57f7"]]),Zl=C({__name:"content",props:{node:{}},setup(s){const r=s,t=U("");return K(()=>{t.value=r.node.name}),(l,a)=>{const d=H;return b(),w(d,null,{default:n(()=>[$(F(t.value||l.node.name),1)]),_:1})}}}),eo={class:"start-box"},lo=C({__name:"index",props:{node:{}},setup(s){return(r,t)=>(b(),q("div",eo,[e(be,{icon:"List",arrow:!1,close:!1,color:"#8c7cf3",node:r.node},{default:n(()=>[e(Zl,{node:r.node},null,8,["node"])]),_:1},8,["node"])]))}});const oo=O(lo,[["__scopeId","data-v-0a059602"]]),to={baseURL:"/api",timeout:8e3};class ao{constructor(r){Ae(this,"service");this.service=zl.create(r),this.service.interceptors.request.use(t=>(t.headers.Authorization="Bearer 87779e5a-3342-4df6-865d-d8828800d6fb",t),t=>Promise.reject(t)),this.service.interceptors.response.use(t=>{const{data:l}=t;return l},t=>{const{response:l,message:a}=t,d=l==null?void 0:l.data,i=d?d.message:a;return fl.error(i||"未知错误"),Promise.reject((l==null?void 0:l.data)||t)})}get(r,t,l={}){return this.service.get(r,{params:t,...l})}post(r,t){return this.service.post(r,t)}put(r,t){return this.service.put(r,t)}delete(r,t){return this.service.delete(r,t)}patch(r,t){return this.service.patch(r,t)}head(r){return this.service.head(r)}options(r){return this.service.options(r)}request(r){return this.service.request(r)}download(r,t){return this.service.post(r,t,{responseType:"blob"})}}const el=new ao(to),no=s=>el.get("/user/info",{username:s}),ce=s=>{const r=s?{userIds:s}:{};return el.post("/user/list",r)},so=C({__name:"content",props:{node:{}},setup(s){const r=s,t=U("");return K(()=>{const l=r.node;l.assigneeType==="choice"?t.value=`发起人自选（${l.choice?"多选":"单选"}）`:l.assigneeType==="self"?t.value="发起人自己":l.assigneeType==="leader"?t.value=l.leader===1?"直属上级":`${l.leader}级上级`:l.assigneeType==="formUser"?t.value="表单内人员":l.assigneeType==="formRole"?t.value="表单内角色":l.assigneeType==="user"?l.users.length>0?ce(l.users).then(a=>{a.success&&(t.value=a.data.map(d=>d.name).join("、"))}):t.value="未指定人员":l.assigneeType==="role"?l.roles.length>0||(t.value="未指定角色"):t.value=r.node.name}),(l,a)=>{const d=H;return b(),w(d,null,{default:n(()=>[$(F(t.value||l.node.name),1)]),_:1})}}}),ro=C({__name:"index",props:{node:{}},setup(s,{expose:r}){const t=s,l=U({showError:!1,message:""});return r({validate:()=>(l.value={showError:!1,message:""},t.node.assigneeType==="user"?t.node.users.length===0&&(l.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定人员`}):t.node.assigneeType==="role"?t.node.roles.length===0&&(l.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定角色`}):t.node.assigneeType==="formUser"?t.node.formRole||(l.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定表单内人员`}):t.node.assigneeType==="formRole"?t.node.formRole||(l.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定表单内角色`}):t.node.assigneeType==="leader"&&(t.node.leader||(l.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定多级上级`})),l.value)}),(d,i)=>(b(),w(be,{icon:"Stamp",color:"linear-gradient(89.96deg, #FA6F32 .05%, #FB9337 79.83%)","error-info":l.value,node:d.node},{default:n(()=>[e(so,{node:d.node},null,8,["node"])]),_:1},8,["error-info","node"]))}}),io=C({__name:"content",props:{node:{}},setup(s){const r=s,t=U("");return K(()=>{const l=r.node;l.users.length>0?ce(l.users).then(a=>{a.success&&(t.value=a.data.map(d=>d.name).join("、"))}):t.value="未指定人员"}),(l,a)=>{const d=H;return b(),w(d,null,{default:n(()=>[$(F(t.value||l.node.name),1)]),_:1})}}}),uo=C({__name:"index",props:{node:{}},setup(s,{expose:r}){const t=s,l=U({showError:!1,message:""});return r({validate:()=>(l.value={showError:!1,message:""},t.node.users.length===0&&(l.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定抄送人`}),l.value)}),(d,i)=>(b(),w(be,nl({icon:"Promotion"},d.$attrs,{color:"#3296FA","error-info":l.value,node:d.node}),{default:n(()=>[e(io,{node:d.node},null,8,["node"])]),_:1},16,["error-info","node"]))}}),co=C({__name:"content",props:{node:{}},setup(s){const r=s,t=U(e("span",null,null));return K(()=>{if(r.node.def)return t.value=e("span",null,[$("不满足条件时，进入默认条件")]);r.node.conditions.conditions.length>0||r.node.conditions.groups.length>0?t.value=e("span",null,[$("已设置（"),r.node.conditions.conditions.length+r.node.conditions.groups.length,$("）个条件")]):t.value=e("span",null,[$("未设置条件")])}),(l,a)=>{const d=H;return b(),w(d,null,{default:n(()=>[e(c(t))]),_:1})}}}),po={class:"condition-box"},_o=C({__name:"index",props:{node:{}},setup(s,{expose:r}){const t=s,l=U({showError:!1,message:""});return r({validate:()=>{if(l.value={showError:!1,message:""},!t.node.def)return t.node.conditions.conditions.length===0&&t.node.conditions.groups.length===0&&(l.value={showError:!0,message:`节点：[ ${t.node.name} ] 未设置条件`}),l.value}}),(d,i)=>(b(),q("div",po,[e(be,{icon:"Share",readOnly:d.node.def,"error-info":l.value,node:d.node},{default:n(()=>[e(co,{node:d.node},null,8,["node"])]),_:1},8,["readOnly","error-info","node"])]))}});const fo=O(_o,[["__scopeId","data-v-1200ce3d"]]),ge=s=>(_e("data-v-1ca7350c"),s=s(),fe(),s),mo={class:"branch-node"},vo={class:"add-branch"},ho=ge(()=>E("div",{class:G("top-right-border")},null,-1)),bo=ge(()=>E("div",{class:G("bottom-right-border")},null,-1)),go=ge(()=>E("div",{class:G("top-left-border")},null,-1)),Vo=ge(()=>E("div",{class:G("bottom-left-border")},null,-1)),yo=C({__name:"index",props:{node:{}},setup(s){const{addNode:r}=j("nodeHooks");return(t,l)=>(b(),q(A,null,[E("div",mo,[E("div",vo,[re(t.$slots,"default",{},void 0,!0)]),(b(!0),q(A,null,W(t.node.children,(a,d)=>(b(),q("div",{key:a.id,class:"col-box"},[t.node.children.length===d+1?(b(),q(A,{key:0},[ho,bo],64)):N("",!0),d===0?(b(),q(A,{key:1},[go,Vo],64)):N("",!0),e(ll,{node:a},null,8,["node"])]))),128))]),e(Ze,{onAddNode:l[0]||(l[0]=a=>c(r)(a,t.node)),class:"branch-but"})],64))}});const $o=O(yo,[["__scopeId","data-v-1ca7350c"]]),Eo=C({__name:"index",props:{node:{}},setup(s){const{addNode:r}=j("nodeHooks");return(t,l)=>{const a=Y;return b(),w($o,{node:t.node},{default:n(()=>[e(a,{type:"primary",onClick:l[0]||(l[0]=d=>c(r)("condition",t.node)),plain:"",round:""},{default:n(()=>[$("添加条件")]),_:1})]),_:1},8,["node"])}}});const wo={},ko={class:"node-box"};function xo(s,r){const t=H;return b(),q("div",ko,[e(t,{class:"end-node"},{default:n(()=>[$(" 结束 ")]),_:1})])}const Co=O(wo,[["render",xo],["__scopeId","data-v-74763bb4"]]),Po=C({name:"NodeTree"}),Uo=C({...Po,props:{node:{}},setup(s){const r={start:oo,approval:ro,cc:uo,condition:fo,exclusive:Eo,end:Co},{addNodeRef:t}=j("nodeHooks");return(l,a)=>{const d=Ee("NodeTree");return b(),q(A,null,[re(l.$slots,"default",{},void 0,!0),(b(),w($e(r[l.node.type]),{node:l.node,ref:i=>i&&c(t)(l.node.id,i)},null,8,["node"])),l.node.child?(b(),w(d,{key:0,node:l.node.child},null,8,["node"])):N("",!0)],64)}}});const ll=O(Uo,[["__scopeId","data-v-64d33364"]]),Ro={class:"flex-center",style:{gap:"4px","grid-gap":"4px"}},Io=C({__name:"UserTag",props:{username:{},type:{default:"info"},closable:{type:Boolean,default:!1}},emits:["close"],setup(s,{emit:r}){const t=s;let l=De({username:void 0,avatar:void 0,name:void 0});sl(()=>{if(!t.username)throw new Error("username is required");no(t.username).then(h=>{h.success&&(l.username=h.data.username,l.avatar=h.data.avatar,l.name=h.data.name)})}),S(()=>{const h="/api";return h.startsWith("http")?h:window.location.origin+h});const a=we(),d=S(()=>ye[a.value||"default"]-12),i=()=>{r("close",t.username)};return(h,v)=>{const m=je,k=ml;return b(),w(k,{round:"",closable:t.closable,type:h.type,effect:"light",onClose:i},{default:n(()=>[E("div",Ro,[e(m,{size:d.value,src:c(l).avatar},{default:n(()=>[$(F((c(l).name||h.username).charAt(0)),1)]),_:1},8,["size","src"]),E("span",null,F(c(l).name||h.username),1)])]),_:1},8,["closable","type"])}}});const Se=O(Io,[["__scopeId","data-v-11e894be"]]),qo={class:"flex flex-1 flex-items-center flex-justify-between"},To={class:"flex-center"},So=C({__name:"UserPicker",props:{modelValue:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{expose:r,emit:t}){const l=s,a={label:"name",children:"children",isLeaf:"leaf",class:f=>k(f)},d=le(l,"modelValue",t),i=U([]),h=U([]),v=U(),m=U([]),k=f=>i.value.find(y=>y.id===f.id)?"is-active":"",x=f=>{if(f.type==="user")if(l.multiple){const g=i.value.findIndex(y=>y.id===f.id);g===-1?(i.value.push(f),i.value.sort((y,I)=>y.id.localeCompare(I.id))):i.value.splice(g,1)}else{const g=i.value.findIndex(y=>y.id===f.id);g===-1?i.value=[f]:i.value.splice(g,1)}},R=U(!1),P=De({name:null});rl(()=>P.name,f=>{var g;(g=v.value)==null||g.filter(f)});const u=(f,g)=>f?g.name.includes(f):!0,o=()=>{R.value=!0},p=()=>{ce().then(g=>{g.success&&(h.value=g.data.map(y=>({id:y.username,name:y.name,type:"user",leaf:!0,avatar:y.avatar})))});let f=[];Array.isArray(d.value)?f.push(...d.value):d.value&&f.push(d.value),f.length>0?ce(f).then(g=>{g.success&&(i.value=g.data.map(y=>({id:y.username,name:y.name,avatar:y.avatar,type:"user",leaf:!0})),i.value.sort((y,I)=>y.id.localeCompare(I.id)))}):i.value=[]},_=()=>{l.multiple?d.value=i.value.map(f=>f.id):i.value.length>0?d.value=i.value[0].id:d.value=null,R.value=!1};return r({open:o}),(f,g)=>{const y=ke,I=je,T=de,J=vl,L=hl,oe=Me,M=Y,D=bl;return b(),w(D,{modelValue:R.value,"onUpdate:modelValue":g[2]||(g[2]=B=>R.value=B),onOpen:p,"align-center":"",draggable:"",title:"选择用户",width:"30%"},{footer:n(()=>[e(M,{onClick:g[1]||(g[1]=B=>R.value=!1)},{default:n(()=>[$("取消")]),_:1}),e(M,{type:"primary",onClick:_},{default:n(()=>[$("确认")]),_:1})]),default:n(()=>[e(oe,{shadow:"never",class:"org-card"},{header:n(()=>[e(y,{modelValue:P.name,"onUpdate:modelValue":g[0]||(g[0]=B=>P.name=B),placeholder:"输入关键字进行查询",style:{width:"100%"},"suffix-icon":"search",clearable:""},null,8,["modelValue"])]),default:n(()=>[e(L,{tag:"div",class:"org-tree"},{default:n(()=>[e(J,{ref_key:"orgTreeRef",ref:v,"node-key":"id",data:h.value,"default-expanded-keys":m.value,props:a,"filter-node-method":u,onNodeClick:x},{default:n(({data:B})=>[E("div",qo,[E("div",To,[B.type==="user"?(b(),w(I,{key:0,size:25,src:B.avatar},{default:n(()=>[$(F(B.name.charAt(0)),1)]),_:2},1032,["src"])):(b(),w(T,{key:1,size:16},{default:n(()=>[e(c(Sl))]),_:1})),$("  "+F(B.name),1)]),e(T,{class:"is-selected"},{default:n(()=>[e(c(Ol))]),_:1})])]),_:1},8,["data","default-expanded-keys"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const Oe=O(So,[["__scopeId","data-v-54f06cf8"]]),Oo={class:"user-wrapper"},No=C({__name:"UserSelector",props:{modelValue:{},placeholder:{default:"请选择用户"},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},style:{}},emits:["update:modelValue"],setup(s,{emit:r}){const t=s,l=le(t,"modelValue",r),a=S(()=>l.value?Array.isArray(l.value)?l.value:[l.value]:[]),d=U(),i=gl(),h=we(),v=S(()=>i.value||t.disabled),m=()=>{var x;(x=d.value)==null||x.open()},k=x=>{l.value&&(t.multiple&&Array.isArray(l.value)?l.value.splice(l.value.indexOf(x),1):l.value=null)};return(x,R)=>{const P=de,u=Y,o=H;return b(),q(A,null,[e(Oe,{ref_key:"userPickerRef",ref:d,multiple:x.multiple,modelValue:c(l),"onUpdate:modelValue":R[0]||(R[0]=p=>me(l)?l.value=p:null)},null,8,["multiple","modelValue"]),E("div",Oo,[e(u,{class:"user-but-item",size:c(h),disabled:v.value,onClick:m,circle:""},{default:n(()=>[e(P,null,{default:n(()=>[e(c(Nl))]),_:1})]),_:1},8,["size","disabled"]),(b(!0),q(A,null,W(a.value,p=>(b(),w(Se,{closable:!v.value,key:p,username:p,onClose:k},null,8,["closable","username"]))),128)),Z(e(o,{class:"placeholder"},{default:n(()=>[$(F(x.placeholder),1)]),_:1},512),[[se,!c(l)||c(l).length===0]])])],64)}}});const Ao=O(No,[["__scopeId","data-v-478c5cf7"]]),Fo=He(Se),Bo=He(Oe),pe=Vl(Ao,{userTag:Se,userPicker:Oe}),zo=Object.freeze(Object.defineProperty({__proto__:null,UserPicker:Bo,UserSelector:pe,UserTag:Fo,default:pe},Symbol.toStringTag,{value:"Module"})),Do=C({__name:"index",props:{block:{type:Boolean,default:!0},modelValue:{}},emits:["update:modelValue"],setup(s,{emit:r}){const l=le(s,"modelValue",r);return(a,d)=>{const i=yl;return b(),w(i,{modelValue:c(l),"onUpdate:modelValue":d[0]||(d[0]=h=>me(l)?l.value=h:null),class:G(["el-segmented",{"is-block":a.block}])},{default:n(()=>[re(a.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","class"])}}});const Ne=O(Do,[["__scopeId","data-v-6406405a"]]),ie=s=>(_e("data-v-c3506525"),s=s(),fe(),s),Lo={class:"flow-opt-item"},Mo={class:"flow-opt-item__content"},jo=ie(()=>E("div",{class:"flow-opt-item__second"}," 同意描述、同意描述、同意描述、同意描述、同意描述、同意描述 ",-1)),Ho={class:"flow-opt-item"},Wo={class:"flow-opt-item__content"},Go=ie(()=>E("div",{class:"flow-opt-item__second"}," 拒绝描述、拒绝描述、拒绝描述、拒绝描述、拒绝描述、拒绝描述 ",-1)),Ko={class:"flow-opt-item"},Yo={class:"flow-opt-item__content"},Jo=ie(()=>E("div",{class:"flow-opt-item__second"}," 转办描述、转办描述、转办描述、转办描述、转办描述、转办描述 ",-1)),Qo={class:"flow-opt-item"},Xo={class:"flow-opt-item__content"},Zo=ie(()=>E("div",{class:"flow-opt-item__second"}," 加签描述、加签描述、加签描述、加签描述、加签描述、加签描述 ",-1)),et={class:"flow-opt-item"},lt={class:"flow-opt-item__content"},ot=ie(()=>E("div",{class:"flow-opt-item__second"}," 减签描述、减签描述、减签描述、减签描述、减签描述、减签描述 ",-1)),tt=C({__name:"ApprovalAttr",props:{node:{}},emits:["update:node"],setup(s,{emit:r}){const t=s,l=U("properties"),{node:a}=ee(t,r),{fields:d}=j("nodeHooks"),i=S({get(){return a.value.formProperties.every(u=>u.writeable)},set(u){a.value.formProperties.forEach(o=>o.writeable=u),u?(v.value=!1,m.value=!1):h.value=!1}}),h=S({get(){return a.value.formProperties.every(u=>u.required)},set(u){a.value.formProperties.forEach(o=>o.required=u),u&&(i.value=!0,v.value=!1,m.value=!1)}}),v=S({get(){return a.value.formProperties.every(u=>u.readable)},set(u){a.value.formProperties.forEach(o=>o.readable=u),u&&(i.value=!1,m.value=!1,h.value=!1)}}),m=S({get(){return a.value.formProperties.every(u=>u.hidden)},set(u){a.value.formProperties.forEach(o=>o.hidden=u),u&&(i.value=!1,h.value=!1,v.value=!1)}}),k=u=>{u.readable&&(u.writeable=!1,u.required=!1,u.hidden=!1)},x=u=>{u.required&&(u.writeable=!0,u.readable=!1,u.hidden=!1)},R=u=>{u.writeable?(u.readable=!1,u.hidden=!1):u.required=!1},P=u=>{u.hidden&&(u.readable=!1,u.writeable=!1,u.required=!1)};return K(()=>{const u=a.value.formProperties;a.value.formProperties=d.value.filter(o=>o.value!==void 0).map(o=>({id:o.id,name:o.title,readable:o.props.disabled||!1,writeable:!o.props.disabled||!1,hidden:o.props.hidden||!1,required:o.props.required&&!o.props.disabled||!1})),a.value.formProperties.forEach(o=>{const p=u.find(_=>_.id===o.id);p&&(o.readable=p.readable,o.writeable=p.writeable,o.hidden=p.hidden,o.required=p.required)})}),(u,o)=>{const p=We,_=$l,f=xe,g=pe,y=El,I=H,T=ve,J=Ce,L=Pe,oe=Ue,M=Re,D=he,B=Ie,te=de,ae=Ge,ne=wl;return b(),w(c(Ne),{modelValue:l.value,"onUpdate:modelValue":o[16]||(o[16]=V=>l.value=V),stretch:"",block:!1},{default:n(()=>[e(oe,{label:"设置审批人",name:"properties"},{default:n(()=>[e(L,{"label-position":"top","label-width":"90px"},{default:n(()=>[e(f,{prop:"assigneeType",label:"审批对象"},{default:n(()=>[e(_,{modelValue:c(a).assigneeType,"onUpdate:modelValue":o[0]||(o[0]=V=>c(a).assigneeType=V)},{default:n(()=>[e(p,{label:"user"},{default:n(()=>[$("指定人员")]),_:1}),e(p,{label:"role"},{default:n(()=>[$("指定角色")]),_:1}),e(p,{label:"choice"},{default:n(()=>[$("发起人自选")]),_:1}),e(p,{label:"self"},{default:n(()=>[$("发起人自己")]),_:1}),e(p,{label:"leader"},{default:n(()=>[$("多级上级")]),_:1}),e(p,{label:"formUser"},{default:n(()=>[$("表单内人员")]),_:1}),e(p,{label:"formRole"},{default:n(()=>[$("表单内角色")]),_:1})]),_:1},8,["modelValue"])]),_:1}),c(a).assigneeType==="user"?(b(),w(f,{key:0,prop:"users",label:"指定人员"},{default:n(()=>[e(g,{multiple:"",placeholder:"请选择人员",modelValue:c(a).users,"onUpdate:modelValue":o[1]||(o[1]=V=>c(a).users=V)},null,8,["modelValue"])]),_:1})):N("",!0),c(a).assigneeType==="choice"?(b(),w(f,{key:1,prop:"selfSelect",label:"发起人自选择"},{default:n(()=>[e(_,{modelValue:c(a).choice,"onUpdate:modelValue":o[2]||(o[2]=V=>c(a).choice=V)},{default:n(()=>[e(y,{label:!1},{default:n(()=>[$("单选")]),_:1}),e(y,{label:!0},{default:n(()=>[$("多选")]),_:1})]),_:1},8,["modelValue"])]),_:1})):N("",!0),c(a).assigneeType==="self"?(b(),w(f,{key:2,prop:"self",label:"发起人自己"},{default:n(()=>[e(I,null,{default:n(()=>[$(" 发起人自己作为审批人进行审批 ")]),_:1})]),_:1})):N("",!0),c(a).assigneeType==="leader"?(b(),w(f,{key:3,prop:"leader",label:"多级上级"},{default:n(()=>[e(J,{modelValue:c(a).leader,"onUpdate:modelValue":o[3]||(o[3]=V=>c(a).leader=V),placeholder:"请选择多级上级"},{default:n(()=>[e(T,{label:"直属上级",value:1}),e(T,{label:"2级上级",value:2}),e(T,{label:"3级上级",value:3}),e(T,{label:"4级上级",value:4}),e(T,{label:"5级上级",value:5}),e(T,{label:"6级上级",value:6}),e(T,{label:"7级上级",value:7}),e(T,{label:"8级上级",value:8}),e(T,{label:"9级上级",value:9}),e(T,{label:"10级上级",value:10}),e(T,{label:"11级上级",value:11})]),_:1},8,["modelValue"])]),_:1})):N("",!0),c(a).assigneeType==="role"?(b(),w(f,{key:4,prop:"roles",label:"指定角色"},{default:n(()=>[$(" 待添加... ")]),_:1})):N("",!0),c(a).assigneeType==="formUser"?(b(),w(f,{key:5,prop:"formUser",label:"表单内人员"},{default:n(()=>[e(J,{placeholder:"选择表单内人员",modelValue:c(a).formUser,"onUpdate:modelValue":o[4]||(o[4]=V=>c(a).formUser=V)},{default:n(()=>[(b(!0),q(A,null,W(c(d).filter(V=>V.name==="UserSelection"),V=>(b(),w(T,{key:V.id,label:V.title,value:V.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):N("",!0),c(a).assigneeType==="formRole"?(b(),w(f,{key:6,prop:"formRole",label:"表单内角色"},{default:n(()=>[$(" 待添加... ")]),_:1})):N("",!0),e(f,{prop:"method",label:"多人审批方式"},{default:n(()=>[e(_,{class:"flex-column",modelValue:c(a).multi,"onUpdate:modelValue":o[5]||(o[5]=V=>c(a).multi=V)},{default:n(()=>[e(p,{label:"sequential"},{default:n(()=>[$("依次审批（按顺序审批）")]),_:1}),e(p,{label:"joint"},{default:n(()=>[$("会签（需要所有审批人都通过才可通过）")]),_:1}),e(p,{label:"single"},{default:n(()=>[$("或签（其中一名审批人通过或驳回即可）")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(f,{prop:"nobody",label:"审批人为空"},{default:n(()=>[e(_,{modelValue:c(a).nobody,"onUpdate:modelValue":o[6]||(o[6]=V=>c(a).nobody=V)},{default:n(()=>[e(p,{label:"pass"},{default:n(()=>[$("自动通过")]),_:1}),e(p,{label:"reject"},{default:n(()=>[$("自动驳回")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(oe,{label:"表单权限",name:"formPermissions"},{default:n(()=>[e(B,{data:c(a).formProperties,style:{width:"100%"}},{default:n(()=>[e(M,{prop:"name",label:"字段"}),e(M,{prop:"readable"},{header:n(()=>[e(D,{modelValue:v.value,"onUpdate:modelValue":o[7]||(o[7]=V=>v.value=V),label:"可读"},null,8,["modelValue"])]),default:n(({row:V})=>[e(D,{modelValue:V.readable,"onUpdate:modelValue":z=>V.readable=z,onChange:z=>k(V)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(M,{prop:"writeable"},{header:n(()=>[e(D,{modelValue:i.value,"onUpdate:modelValue":o[8]||(o[8]=V=>i.value=V),label:"可写"},null,8,["modelValue"])]),default:n(({row:V})=>[e(D,{modelValue:V.writeable,"onUpdate:modelValue":z=>V.writeable=z,onChange:z=>R(V)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(M,{prop:"required"},{header:n(()=>[e(D,{modelValue:h.value,"onUpdate:modelValue":o[9]||(o[9]=V=>h.value=V),label:"必填"},null,8,["modelValue"])]),default:n(({row:V})=>[e(D,{modelValue:V.required,"onUpdate:modelValue":z=>V.required=z,onChange:z=>x(V)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(M,{prop:"hidden"},{header:n(()=>[e(D,{modelValue:m.value,"onUpdate:modelValue":o[10]||(o[10]=V=>m.value=V),label:"隐藏"},null,8,["modelValue"])]),default:n(({row:V})=>[e(D,{modelValue:V.hidden,"onUpdate:modelValue":z=>V.hidden=z,onChange:z=>P(V)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1}),e(oe,{label:"操作权限",name:"operationPermissions"},{default:n(()=>[E("div",Lo,[e(te,{size:32,class:"flow-opt-item__icon"},{default:n(()=>[e(c(Al))]),_:1}),E("div",Mo,[e(I,{tag:"b"},{default:n(()=>[$(" 同意 ")]),_:1}),jo]),e(ae,{modelValue:c(a).operations.complete,"onUpdate:modelValue":o[11]||(o[11]=V=>c(a).operations.complete=V),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ne),E("div",Ho,[e(te,{size:32,class:"flow-opt-item__icon"},{default:n(()=>[e(c(Qe))]),_:1}),E("div",Wo,[e(I,{tag:"b"},{default:n(()=>[$(" 拒绝 ")]),_:1}),Go]),e(ae,{modelValue:c(a).operations.refuse,"onUpdate:modelValue":o[12]||(o[12]=V=>c(a).operations.refuse=V),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ne),E("div",Ko,[e(te,{size:32,class:"flow-opt-item__icon"},{default:n(()=>[e(c(Fl))]),_:1}),E("div",Yo,[e(I,{tag:"b"},{default:n(()=>[$(" 转办 ")]),_:1}),Jo]),e(ae,{modelValue:c(a).operations.transfer,"onUpdate:modelValue":o[13]||(o[13]=V=>c(a).operations.transfer=V),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ne),E("div",Qo,[e(te,{size:32,class:"flow-opt-item__icon"},{default:n(()=>[e(c(qe))]),_:1}),E("div",Xo,[e(I,{tag:"b"},{default:n(()=>[$(" 加签 ")]),_:1}),Zo]),e(ae,{modelValue:c(a).operations.addMulti,"onUpdate:modelValue":o[14]||(o[14]=V=>c(a).operations.addMulti=V),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ne),E("div",et,[e(te,{size:32,class:"flow-opt-item__icon"},{default:n(()=>[e(c(Xe))]),_:1}),E("div",lt,[e(I,{tag:"b"},{default:n(()=>[$(" 减签 ")]),_:1}),ot]),e(ae,{modelValue:c(a).operations.minusMulti,"onUpdate:modelValue":o[15]||(o[15]=V=>c(a).operations.minusMulti=V),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ne)]),_:1})]),_:1},8,["modelValue"])}}});const at=O(tt,[["__scopeId","data-v-c3506525"]]),nt=C({__name:"CcAttr",props:{node:{}},emits:["update:node"],setup(s,{emit:r}){const t=s,l=U("properties"),{node:a}=ee(t,r),{fields:d}=j("nodeHooks"),i=S({get(){return a.value.formProperties.every(v=>v.readable)},set(v){a.value.formProperties.forEach(m=>m.readable=v),h.value=!v}}),h=S({get(){return a.value.formProperties.every(v=>v.hidden)},set(v){a.value.formProperties.forEach(m=>m.hidden=v),i.value=!v}});return K(()=>{const v=a.value.formProperties;a.value.formProperties=d.value.filter(m=>m.value!==void 0).map(m=>({id:m.id,name:m.title,readable:!0,writeable:!1,required:!1,hidden:m.props.hidden||!1})),a.value.formProperties.forEach(m=>{const k=v.find(x=>x.id===m.id);k&&(m.readable=k.readable,m.writeable=k.writeable,m.hidden=k.hidden,m.required=k.required)})}),(v,m)=>{const k=pe,x=xe,R=Pe,P=Ue,u=Re,o=he,p=Ie;return b(),w(c(Ne),{modelValue:l.value,"onUpdate:modelValue":m[3]||(m[3]=_=>l.value=_),stretch:"",block:!1},{default:n(()=>[e(P,{label:"设置抄送人",name:"properties"},{default:n(()=>[e(R,{"label-position":"top","label-width":"90px"},{default:n(()=>[e(x,{prop:"users",label:"抄送人"},{default:n(()=>[e(k,{multiple:"",placeholder:"请选择人员",modelValue:c(a).users,"onUpdate:modelValue":m[0]||(m[0]=_=>c(a).users=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(P,{label:"表单权限",name:"formPermissions"},{default:n(()=>[e(p,{data:c(a).formProperties,style:{width:"100%"}},{default:n(()=>[e(u,{prop:"name",label:"字段"}),e(u,{prop:"readable"},{header:n(()=>[e(o,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=_=>i.value=_),label:"可读"},null,8,["modelValue"])]),default:n(({row:_})=>[e(o,{modelValue:_.readable,"onUpdate:modelValue":f=>_.readable=f,onChange:f=>_.hidden=!f},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(u,{prop:"hidden"},{header:n(()=>[e(o,{modelValue:h.value,"onUpdate:modelValue":m[2]||(m[2]=_=>h.value=_),label:"隐藏"},null,8,["modelValue"])]),default:n(({row:_})=>[e(o,{modelValue:_.hidden,"onUpdate:modelValue":f=>_.hidden=f,onChange:f=>_.readable=!f},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])}}}),st=C({__name:"StartAttr",props:{node:{}},emits:["update:node"],setup(s,{emit:r}){const t=s,l=U("formPermissions"),{node:a}=ee(t,r),{fields:d}=j("nodeHooks"),i=S({get(){return a.value.formProperties.every(u=>u.writeable)},set(u){a.value.formProperties.forEach(o=>o.writeable=u),u?(v.value=!1,m.value=!1):h.value=!1}}),h=S({get(){return a.value.formProperties.every(u=>u.required)},set(u){a.value.formProperties.forEach(o=>o.required=u),u&&(i.value=!0,v.value=!1,m.value=!1)}}),v=S({get(){return a.value.formProperties.every(u=>u.readable)},set(u){a.value.formProperties.forEach(o=>o.readable=u),u&&(i.value=!1,m.value=!1,h.value=!1)}}),m=S({get(){return a.value.formProperties.every(u=>u.hidden)},set(u){a.value.formProperties.forEach(o=>o.hidden=u),u&&(i.value=!1,h.value=!1,v.value=!1)}}),k=u=>{u.hidden&&(u.readable=!1,u.writeable=!1,u.required=!1)},x=u=>{u.writeable?(u.readable=!1,u.hidden=!1):u.required=!1},R=u=>{u.readable&&(u.writeable=!1,u.required=!1,u.hidden=!1)},P=u=>{u.required&&(u.writeable=!0,u.readable=!1,u.hidden=!1)};return K(()=>{const u=a.value.formProperties;a.value.formProperties=d.value.filter(o=>o.value!==void 0).map(o=>({id:o.id,name:o.title,readable:o.props.disabled||!1,writeable:!o.props.disabled||!1,hidden:o.props.hidden||!1,required:o.props.required&&!o.props.disabled||!1})),a.value.formProperties.forEach(o=>{const p=u.find(_=>_.id===o.id);p&&(o.readable=p.readable,o.writeable=p.writeable,o.hidden=p.hidden,o.required=p.required)})}),(u,o)=>{const p=Re,_=he,f=Ie,g=Ue;return b(),w(c(Ne),{modelValue:l.value,"onUpdate:modelValue":o[4]||(o[4]=y=>l.value=y),stretch:"",block:!1},{default:n(()=>[e(g,{label:"表单权限",name:"formPermissions"},{default:n(()=>[e(f,{data:c(a).formProperties,style:{width:"100%"}},{default:n(()=>[e(p,{prop:"name",label:"字段"}),e(p,{prop:"readable"},{header:n(()=>[e(_,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=y=>v.value=y),label:"可读"},null,8,["modelValue"])]),default:n(({row:y})=>[e(_,{modelValue:y.readable,"onUpdate:modelValue":I=>y.readable=I,onChange:I=>R(y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(p,{prop:"writeable"},{header:n(()=>[e(_,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=y=>i.value=y),label:"可写"},null,8,["modelValue"])]),default:n(({row:y})=>[e(_,{modelValue:y.writeable,"onUpdate:modelValue":I=>y.writeable=I,onChange:I=>x(y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(p,{prop:"required"},{header:n(()=>[e(_,{modelValue:h.value,"onUpdate:modelValue":o[2]||(o[2]=y=>h.value=y),label:"必填"},null,8,["modelValue"])]),default:n(({row:y})=>[e(_,{modelValue:y.required,"onUpdate:modelValue":I=>y.required=I,onChange:I=>P(y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(p,{prop:"hidden"},{header:n(()=>[e(_,{modelValue:m.value,"onUpdate:modelValue":o[3]||(o[3]=y=>m.value=y),label:"隐藏"},null,8,["modelValue"])]),default:n(({row:y})=>[e(_,{modelValue:y.hidden,"onUpdate:modelValue":I=>y.hidden=I,onChange:I=>k(y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1}),e(g,{label:"操作权限",name:"operationPermissions"},{default:n(()=>[$(" 待添加... ")]),_:1})]),_:1},8,["modelValue"])}}}),rt=C({__name:"Trigger",props:{modelValue:{},options:{},filterRules:{}},emits:["update:modelValue"],setup(s,{emit:r}){const t=s,l=le(t,"modelValue",r);return(a,d)=>{const i=ve,h=Ce;return b(),w(h,{class:"trigger-container",modelValue:c(l),"onUpdate:modelValue":d[0]||(d[0]=v=>me(l)?l.value=v:null),filterable:"",placeholder:"选择字段"},{default:n(()=>[(b(!0),q(A,null,W(t.options,v=>(b(),w(i,{key:v.id,label:v.title,value:v.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}}),dt=C({__name:"Operator",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:r}){const t=s,l=[{value:"equal",label:"等于"},{value:"not_equal",label:"不等于"},{label:"包含",value:"contains"},{label:"不包含",value:"not_contain"}],a=le(t,"modelValue",r);return(d,i)=>{const h=ve,v=Ce;return b(),w(v,{class:"operator-container",modelValue:c(a),"onUpdate:modelValue":i[0]||(i[0]=m=>me(a)?a.value=m:null),filterable:"",placeholder:"筛选符"},{default:n(()=>[(b(),q(A,null,W(l,m=>e(h,{key:m.value,label:m.label,value:m.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])}}});const it=O(dt,[["__scopeId","data-v-b7adb9aa"]]),ut="modulepreload",ct=function(s){return"/lowflow-design/"+s},Be={},X=function(r,t,l){if(!t||t.length===0)return r();const a=document.getElementsByTagName("link");return Promise.all(t.map(d=>{if(d=ct(d),d in Be)return;Be[d]=!0;const i=d.endsWith(".css"),h=i?'[rel="stylesheet"]':"";if(!!l)for(let k=a.length-1;k>=0;k--){const x=a[k];if(x.href===d&&(!i||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=i?"stylesheet":ut,i||(m.as="script",m.crossOrigin=""),m.href=d,document.head.appendChild(m),i)return new Promise((k,x)=>{m.addEventListener("load",k),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>r()).catch(d=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=d,window.dispatchEvent(i),!i.defaultPrevented)throw d})},pt=C({props:{modelValue:{type:[String,Number,Boolean,Array,Object],default:void 0,required:!1},field:{type:Object,required:!0}},emits:["update:modelValue"],components:{Input:Q(()=>X(()=>import("./element-plus-ce7ab288.js").then(s=>s.O),["assets/js/element-plus-ce7ab288.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-cba4eff8.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-d026887f.css"]).then(({ElInput:s})=>s)),Number:Q(()=>X(()=>import("./element-plus-ce7ab288.js").then(s=>s.O),["assets/js/element-plus-ce7ab288.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-cba4eff8.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-d026887f.css"]).then(({ElInputNumber:s})=>s)),Select:Q(()=>X(()=>import("./element-plus-ce7ab288.js").then(s=>s.O),["assets/js/element-plus-ce7ab288.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-cba4eff8.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-d026887f.css"]).then(({ElSelect:s})=>s)),Radio:Q(()=>X(()=>import("./element-plus-ce7ab288.js").then(s=>s.O),["assets/js/element-plus-ce7ab288.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-cba4eff8.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-d026887f.css"]).then(({ElRadio:s})=>s)),Checkbox:Q(()=>X(()=>import("./element-plus-ce7ab288.js").then(s=>s.O),["assets/js/element-plus-ce7ab288.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-cba4eff8.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-d026887f.css"]).then(({ElCheckbox:s})=>s)),UserSelection:Q(()=>X(()=>Promise.resolve().then(()=>zo),void 0))},setup(s,{emit:r}){return{buildProps:a=>{const d={},i=a.props||{};return Object.keys(i).forEach(h=>{d[h]=i[h]}),s.modelValue!==void 0?d.modelValue=s.modelValue:d.modelValue=a.value,d["onUpdate:modelValue"]=h=>{r("update:modelValue",h)},delete d.options,d},buildSlots:a=>{let d={};const h={Select:v=>v.props.options.map(m=>e(ve,{label:m.label,value:m.value},null)),Radio:v=>v.props.options.map(m=>e(We,{label:m.value},{default:()=>[m.label]})),Checkbox:v=>v.props.options.map(m=>e(he,{label:m.value},{default:()=>[m.label]}))}[a.name];return h&&(d.default=()=>h(a)),d}}},render(){const s=Dl(this.field),r=this.buildSlots(s),t=this.buildProps(s),l=Ee(s.name);return typeof l=="string"?Fe(l,t,r):Fe(l,t,r)}}),_t=s=>(_e("data-v-d497ed2d"),s=s(),fe(),s),ft={class:"filter-container"},mt={class:"logical-operator"},vt=_t(()=>E("div",{class:"logical-operator__line"},null,-1)),ht={class:"filter-option-content"},bt={key:0,class:"filter-item-rule"},gt={class:"filter-item-rule"},Vt=C({name:"ConditionFilter"}),yt=C({...Vt,props:{filterFields:{},modelValue:{}},emits:["update:modelValue","addCondition","delCondition","delGroup"],setup(s,{emit:r}){const t=s,l=le(t,"modelValue",r),a=()=>{l.value.conditions.push({field:null,operator:"equal",value:null})},d=v=>{l.value.conditions.splice(v,1),l.value.conditions.length<=0&&r("delGroup"),r("delCondition",v)},i=()=>{l.value.groups.push({logicalOperator:"and",conditions:[{field:null,operator:"",value:null}],groups:[]})},h=v=>{l.value.groups.splice(v,1)};return(v,m)=>{const k=Ge,x=xe,R=kl,P=Y,u=xl,o=Ee("ConditionFilter"),p=Pe;return b(),q("div",ft,[E("div",mt,[vt,e(k,{modelValue:c(l).logicalOperator,"onUpdate:modelValue":m[0]||(m[0]=_=>c(l).logicalOperator=_),"inline-prompt":"",style:{"--el-switch-on-color":"#409EFF","--el-switch-off-color":"#67C23A"},"active-value":"and","inactive-value":"or","active-text":"且","inactive-text":"或"},null,8,["modelValue"])]),E("div",ht,[e(p,{"label-width":0,inline:!0,model:c(l)},{default:n(()=>[(b(!0),q(A,null,W(c(l).conditions,(_,f)=>(b(),w(u,{key:`${_.field}-${f}`,gutter:5,class:"filter-item-rule"},{default:n(()=>[e(R,{xs:24,sm:7},{default:n(()=>[e(x,{prop:"conditions."+f+".field",style:{width:"100%"}},{default:n(()=>[e(rt,{ref_for:!0,ref:"triggerRef",options:t.filterFields.filter(g=>g.value!==void 0),"filter-rules":c(l),modelValue:_.field,"onUpdate:modelValue":[g=>_.field=g,g=>_.value=null]},null,8,["options","filter-rules","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),_.field?(b(),w(R,{key:0,xs:24,sm:5},{default:n(()=>[e(x,{prop:"conditions."+f+".operator",style:{width:"100%"}},{default:n(()=>[e(it,{ref_for:!0,ref:"operatorRef",modelValue:_.operator,"onUpdate:modelValue":g=>_.operator=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)):N("",!0),_.field?(b(),w(R,{key:1,xs:24,sm:10},{default:n(()=>[e(x,{prop:"conditions."+f+".value",style:{width:"100%"}},{default:n(()=>[e(c(pt),{field:t.filterFields.find(g=>g.id===_.field),modelValue:_.value,"onUpdate:modelValue":g=>_.value=g},null,8,["field","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)):N("",!0),e(R,{xs:24,sm:2,style:{display:"flex","align-items":"center","flex-direction":"row-reverse"}},{default:n(()=>[e(P,{plain:"",circle:"",type:"danger",icon:c(Bl),onClick:g=>d(f)},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1024))),128)),(b(!0),q(A,null,W(c(l).groups,(_,f)=>(b(),w(o,{key:f,onDelGroup:g=>h(f),modelValue:c(l).groups[f],"onUpdate:modelValue":g=>c(l).groups[f]=g,filterFields:v.filterFields},{default:n(()=>[e(P,{onClick:g=>h(f),icon:"CircleClose",class:"filter-filter-item__add"},{default:n(()=>[$(" 删除条件组 ")]),_:2},1032,["onClick"])]),_:2},1032,["onDelGroup","modelValue","onUpdate:modelValue","filterFields"]))),128)),c(l).groups.length===0&&c(l).conditions.length===0?(b(),q("div",bt)):N("",!0)]),_:1},8,["model"]),E("div",gt,[e(P,{onClick:a,icon:"CirclePlus",class:"filter-filter-item__add"},{default:n(()=>[$(" 添加条件 ")]),_:1}),e(P,{onClick:i,icon:"CirclePlus",class:"filter-filter-item__add"},{default:n(()=>[$(" 添加条件组 ")]),_:1}),re(v.$slots,"default",{},void 0,!0)])])])}}});const $t=O(yt,[["__scopeId","data-v-d497ed2d"]]),Et=C({__name:"ConditionAttr",props:{node:{}},emits:["update:node"],setup(s,{emit:r}){const t=s,{node:l}=ee(t,r),{fields:a}=j("nodeHooks");return(d,i)=>(b(),w($t,{modelValue:c(l).conditions,"onUpdate:modelValue":i[0]||(i[0]=h=>c(l).conditions=h),"filter-fields":c(a)},null,8,["modelValue","filter-fields"]))}}),wt=["id"],kt=C({__name:"index",setup(s,{expose:r}){const t={start:st,approval:at,cc:nt,condition:Et};let l=U({id:"",pid:"",type:"",name:"",child:null});const a=U(!1),d=U(!1),i=()=>{d.value&&(d.value=!1)};return r({open:v=>{l.value=v,a.value=!0}}),(v,m)=>{const k=ke,x=Cl,R=Pl;return b(),w(R,{modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=P=>a.value=P),size:"35%"},{header:n(({titleId:P,titleClass:u})=>[E("span",{id:P,class:G(u)},[Z(e(k,{onBlur:i,maxlength:"30",modelValue:c(l).name,"onUpdate:modelValue":m[0]||(m[0]=o=>c(l).name=o)},null,8,["modelValue"]),[[c(Le),i],[se,d.value]]),Z(e(x,{icon:"EditPen",onClick:m[1]||(m[1]=o=>d.value=!0)},{default:n(()=>[$(F(c(l).name),1)]),_:1},512),[[se,!d.value]])],10,wt)]),default:n(()=>[(b(),w($e(t[c(l).type]),{node:c(l)},null,8,["node"]))]),_:1},8,["modelValue"])}}});const xt=O(kt,[["__scopeId","data-v-d67ff789"]]),Ct=(s,r)=>{const t=U(new Map),l=U(new Map),a=()=>(t.value.clear(),l.value.forEach((o,p)=>{const _=o==null?void 0:o.validate;if(_){const f=_();f&&f.showError&&t.value.set(p,f.message)}}),t),d=(o,p)=>{l.value.set(o,p)},i=()=>{let o=`node-${Math.random().toString(36).substring(2,7)}`;const p=(_,f)=>{if(_.id===f)return!0;if(_.child)return p(_.child,f);if("children"in _){const g=_;if(g.children&&g.children.length>0)return g.children.some(y=>p(y,f))}return!1};return p(s.value,o)?i():o},h=o=>{const p=o;p.children.unshift({id:i(),pid:o.id,type:"condition",def:!1,name:`条件${p.children.length+1}`,conditions:{logicalOperator:"and",conditions:[],groups:[]},child:null})},x={condition:h,approval:o=>{const p=o.child,_=i();o.child={id:_,pid:o.id,type:"approval",name:"审批人",child:p,assigneeType:"user",formUser:"",formRole:"",users:[],roles:[],leader:1,choice:!1,self:!1,multi:"sequential",nobody:"pass",formProperties:r.value.map(f=>({id:f.id,name:f.title,readable:!0,writeable:!1,hidden:!1,required:!1})),operations:{complete:!0,refuse:!0,save:!0,transfer:!1,addMulti:!1,minusMulti:!1}},p&&(p.pid=_)},cc:o=>{const p=o.child,_=i();o.child={id:_,pid:o.id,type:"cc",name:"抄送人",child:p,users:[],formProperties:r.value.map(f=>({id:f.id,name:f.title,readable:!0,writeable:!1,hidden:!1,required:!1}))},p&&(p.pid=_)},exclusive:o=>{const p=o.child,_=i(),f={id:_,pid:o.id,type:"exclusive",name:"独占网关",child:p,children:[]};if(o.child=f,p&&(p.pid=_),h(o.child),h(o.child),f.children.length>0){const g=f.children[f.children.length-1];g.def=!0,g.name="默认条件"}}},R=(o,p)=>{const _=x[o];_&&_(p)},P=o=>{u(s.value,o)},u=(o,p)=>{var _;if(o.id===p.pid)if("children"in o&&((_=o.child)==null?void 0:_.id)!==p.id){const f=o,g=f.children.findIndex(y=>y.id===p.id);g!==-1&&(f.children.length<=2?P(f):f.children.splice(g,1))}else p.child&&p.child.pid&&(p.child.pid=o.id),o.child=p.child;else if(o.child&&u(o.child,p),"children"in o){const f=o;f.children&&f.children.length>0&&f.children.forEach(g=>{u(g,p)})}};return{addNode:R,delNode:P,addNodeRef:d,validateNodes:a,nodeErrors:t}},Pt={class:"designer-container"},Ut={class:"zoom"},Rt={class:"node-container"},It=C({name:"flowDesign"}),qt=C({...It,props:{process:{},fields:{}},emits:["update:process","update:fields"],setup(s,{emit:r}){const t=s;ze(o=>({"876f4a54":h.value}));const{process:l,fields:a}=ee(t,r),d=U(),i=U(100),h=S(()=>i.value/100),v=o=>{var p;(p=d.value)==null||p.open(o)},{addNode:m,delNode:k,validateNodes:x,addNodeRef:R}=Ct(l,a);dl("nodeHooks",{readOnly:!1,fields:a,addNode:m,delNode:k,addNodeRef:R,openPenal:v});const P=o=>{o.shiftKey&&(o.deltaY>0?i.value>50&&(i.value-=10):i.value<170&&(i.value+=10))},u=()=>{x()};return window.addEventListener("wheel",P),il(()=>{window.removeEventListener("wheel",P)}),(o,p)=>{const _=Y;return b(),q("div",Pt,[E("div",Ut,[e(_,{icon:c(qe),onClick:p[0]||(p[0]=f=>i.value+=10),disabled:i.value>=170,circle:""},null,8,["icon","disabled"]),E("span",null,F(i.value)+"%",1),e(_,{icon:c(Xe),onClick:p[1]||(p[1]=f=>i.value-=10),circle:"",disabled:i.value<=50},null,8,["icon","disabled"]),e(_,{onClick:u},{default:n(()=>[$("校验")]),_:1})]),E("div",Rt,[e(ll,{node:c(l)},null,8,["node"])]),e(xt,{ref_key:"nodePenalRef",ref:d},null,512)])}}});const Tt=O(qt,[["__scopeId","data-v-2c505610"]]),St=C({__name:"App",setup(s){const r=U({id:"root",pid:null,type:"start",name:"发起人",formProperties:[],child:{id:"end",pid:"root",type:"end",name:"结束",child:null}}),t=U([{id:"field_da2w55",title:"请假人",name:"UserSelection",value:null,props:{multiple:!1,disabled:!1,placeholder:"请选择用户",style:{width:"100%"}}},{id:"field_fa2w40",title:"请假天数",name:"Number",value:null,props:{disabled:!1,placeholder:"请输入请假天数",style:{width:"100%"},min:0,max:100,step:1,precision:0}},{id:"field_d42t45",title:"请假事由",name:"Select",value:null,props:{disabled:!1,multiple:!1,placeholder:"请选择请假事由",options:[{label:"事假",value:"事假"},{label:"病假",value:"病假"},{label:"婚假",value:"婚假"},{label:"产假",value:"产假"},{label:"丧假",value:"丧假"},{label:"其他",value:"其他"}],style:{width:"100%"}}},{id:"field_522g58",title:"请假原因",name:"Input",value:null,props:{type:"textarea",placeholder:"请输入请假原因",autosize:{minRows:3,maxRows:3},disabled:!1,style:{width:"100%"}}}]);return(l,a)=>{const d=Rl;return b(),w(d,{namespace:"el",locale:c(Ul)},{default:n(()=>[e(Tt,{process:r.value,fields:t.value},null,8,["process","fields"])]),_:1},8,["locale"])}}});const Ve=[{id:1,name:"张三",username:"admin",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:2,name:"李四",username:"lisi",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:3,name:"王五",username:"wangwu",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:4,name:"赵六",username:"zhaoliu",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:5,name:"孙七",username:"sunqi",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:6,name:"周八",username:"zhouba",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:7,name:"吴九",username:"wujui",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:8,name:"郑十",username:"zhengshi",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"}],Ot=[{url:"/api/user/info",method:"get",response:s=>{const r=s.query.username;return{code:200,success:!0,message:"操作成功",data:Ve.find(t=>t.username===r)}}},{url:"/api/user/list",method:"post",response:s=>{const r=s.body.userIds;return{code:200,success:!0,message:"操作成功",data:Array.isArray(r)?Ve.filter(t=>r.includes(t.username)):Ve}}}],Nt=[...Ot],At=[...Nt];function Ft(){Ll(At)}const Bt=ul(St);Bt.mount("#app");Ft();
