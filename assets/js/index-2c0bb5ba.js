var bl=Object.defineProperty;var gl=(l,d,t)=>d in l?bl(l,d,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[d]=t;var Ke=(l,d,t)=>(gl(l,typeof d!="symbol"?d+"":d,t),t);import{I as S,r as U,o as V,c as O,X as e,Q as s,u,a as $,av as me,aw as ve,ax as Qe,i as I,A as W,a4 as ce,R as Z,P as C,V as k,W as j,S as Ue,U as N,Y as oe,J as se,K as ee,n as yl,x as he,M as Vl,F as q,a8 as H,ag as Re,z as re,$ as be,e as Ze,w as el,b as Se,ay as J,E as Xe,H as $l,D as kl,ar as wl}from"./@vue-fa59abb2.js";import{E as le,a as G,b as El,u as de,c as pe,C as ll,d as ge,e as Cl,f as K,g as xl,h as Oe,i as Pl,j as Ul,k as ol,l as tl,m as nl,n as al,o as sl,p as rl,w as ye,q as dl,r as ul,s as Rl,t as Ie,v as Sl,x as Ve,y as Ae,z as Te,A as qe,B as Fe,D as $e,F as Ne,G as Be,H as Ol,I as Il,J as Al,K as Tl,L as ql,M as Fl,N as Nl}from"./element-plus-0efb83dc.js";import{B as ze,Q as il,R as cl,S as pl,T as Bl,U as zl,a as je,V as jl,W as fl,o as _l,X as Dl,Y as Ll,c as Ml,Z as Hl,A as ml,_ as Ye,P as Wl,$ as Gl,a0 as Kl,a1 as Xl}from"./@element-plus-d053c1a3.js";import{n as te,m as X}from"./@vueuse-159cba4b.js";import{a as Yl}from"./axios-21b846bc.js";import{j as Jl}from"./lodash-es-21c98b27.js";import{F as Ql}from"./file-saver-469be3e2.js";import{c as Zl}from"./vite-plugin-mock-3ea673a4.js";import"./@sxzz-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f21ac596.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-593301b5.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";import"./mockjs-07179472.js";import"./path-to-regexp-31db6522.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const De=l=>(me("data-v-e5f31a23"),l=l(),ve(),l),eo={class:"add-but"},lo={class:"node-select"},oo=De(()=>$("span",null,"审批人",-1)),to=De(()=>$("span",null,"抄送人",-1)),no=De(()=>$("span",null,"互斥分支",-1)),ao=S({__name:"index",emits:["addNode"],setup(l,{emit:d}){const t=U(),o=()=>{var r;d("addNode","approval"),(r=t.value)==null||r.hide()},a=()=>{var r;d("addNode","cc"),(r=t.value)==null||r.hide()},i=()=>{var r;d("addNode","exclusive"),(r=t.value)==null||r.hide()};return(r,h)=>{const g=le,v=G,x=El;return V(),O("div",eo,[e(x,{placement:"bottom-start",ref_key:"nodePopoverRef",ref:t,trigger:"click",title:"添加节点",width:235},{reference:s(()=>[e(v,{icon:u(ze),type:"primary",style:{"z-index":"1"},circle:""},null,8,["icon"])]),default:s(()=>[$("div",lo,[$("div",{onClick:o},[e(g,{color:"#ff943e"},{default:s(()=>[e(u(il))]),_:1}),oo]),$("div",{onClick:a},[e(g,{color:"#3296fa"},{default:s(()=>[e(u(cl))]),_:1}),to]),$("div",{onClick:i},[e(g,null,{default:s(()=>[e(u(pl))]),_:1}),no])])]),_:1},512)])}}});const A=(l,d)=>{const t=l.__vccOpts||l;for(const[o,a]of d)t[o]=a;return t},vl=A(ao,[["__scopeId","data-v-e5f31a23"]]),so={class:"node-box"},ro={class:"head"},uo={key:2},io=S({__name:"index",props:{icon:{},node:{},color:{},readOnly:{type:Boolean,default:!1},close:{type:Boolean,default:!0},arrow:{type:Boolean,default:!0},errorInfo:{default:()=>({showError:!1,message:""})}},emits:["update:node"],setup(l,{emit:d}){const t=l;Qe(f=>({f13798a2:v.value,"78d01a3e":g.value,f023673c:f.color}));const o={list:jl,stamp:il,share:pl,promotion:cl},{node:a}=te(t,d),i=U(!1),r=U(),h=de(),g=I(()=>pe[h.value||"default"]+205+"px"),v=I(()=>pe[h.value||"default"]+60+"px"),{addNode:x,delNode:E,openPenal:P}=W("nodeHooks"),R=()=>{t.readOnly||P(a.value)},p=()=>{t.readOnly||(i.value=!0,yl(()=>{var f;(f=r.value)==null||f.focus()}))},n=()=>{i.value&&(i.value=!1)};return(f,m)=>{const c=le,_=Cl,b=K,w=G,F=xl,Y=Oe;return V(),O("div",so,[e(Y,{shadow:"always",onClick:m[5]||(m[5]=B=>R()),class:ee(["node",{"error-node":t.errorInfo.showError}])},{header:s(()=>[$("div",ro,[i.value?(V(),O("div",{key:0,onClick:m[2]||(m[2]=ce(()=>{},["stop"]))},[Z(e(u(ge),{ref_key:"inputRef",ref:r,onBlur:n,maxlength:"30",modelValue:u(a).name,"onUpdate:modelValue":m[1]||(m[1]=B=>u(a).name=B)},null,8,["modelValue"]),[[u(ll),n]])])):(V(),C(b,{key:1,tag:"b",truncated:"",onClick:ce(p,["stop"])},{default:s(()=>[k(j(u(a).name)+" ",1),e(c,null,{default:s(()=>[e(u(Bl))]),_:1})]),_:1},8,["onClick"])),f.icon?(V(),O("span",uo,[e(c,{size:30,color:"node-icon"},{default:s(()=>[(V(),C(Ue(o[f.icon.toLowerCase()])))]),_:1})])):N("",!0)])]),default:s(()=>[e(_,{placement:"top-start"},{content:s(()=>[k(j(t.errorInfo.message),1)]),default:s(()=>[Z(e(c,{class:"warn-icon",size:20},{default:s(()=>[e(u(zl),{onClick:m[0]||(m[0]=ce(()=>{},["stop"]))})]),_:1},512),[[oe,t.errorInfo.showError]])]),_:1}),$("div",{onClick:m[4]||(m[4]=ce(()=>{},["stop"]))},[e(F,{title:"您确定要删除该节点吗？",width:"200","hide-after":0,placement:"right-start",onConfirm:m[3]||(m[3]=B=>u(E)(u(a)))},{reference:s(()=>[Z(e(w,{class:"node-close",plain:"",circle:"",icon:u(je),size:"small",type:"danger"},null,8,["icon"]),[[oe,f.close&&!f.readOnly]])]),_:1})]),se(f.$slots,"default",{},void 0,!0)]),_:3},8,["class"]),e(vl,{onAddNode:m[6]||(m[6]=B=>u(x)(B,u(a)))})])}}});const ke=A(io,[["__scopeId","data-v-280b57f7"]]);function co(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!he(l)}const po=S({props:{node:{type:Object,required:!0}},setup(l){const d=U(e("span",null,null));return{renderContent:()=>(d.value=e("span",null,[l.node.name]),d.value)}},render(){let l;return e(K,null,co(l=this.renderContent())?l:{default:()=>[l]})}}),fo={class:"start-box"},_o=S({__name:"index",props:{node:{}},setup(l){return(d,t)=>(V(),O("div",fo,[e(ke,{icon:"List",arrow:!1,close:!1,color:"#8c7cf3",node:d.node},{default:s(()=>[e(u(po),{node:d.node},null,8,["node"])]),_:1},8,["node"])]))}});const mo=A(_o,[["__scopeId","data-v-583a5cb1"]]),vo={baseURL:"/api",timeout:8e3};class ho{constructor(d){Ke(this,"service");this.service=Yl.create(d),this.service.interceptors.request.use(t=>t,t=>Promise.reject(t)),this.service.interceptors.response.use(t=>{const{data:o}=t;return o},t=>{const{response:o,message:a}=t,i=o==null?void 0:o.data,r=i?i.message:a;return Pl.error(r||"未知错误"),Promise.reject((o==null?void 0:o.data)||t)})}get(d,t,o={}){return this.service.get(d,{params:t,...o})}post(d,t){return this.service.post(d,t)}put(d,t){return this.service.put(d,t)}delete(d,t){return this.service.delete(d,t)}patch(d,t){return this.service.patch(d,t)}head(d){return this.service.head(d)}options(d){return this.service.options(d)}request(d){return this.service.request(d)}download(d,t){return this.service.post(d,t,{responseType:"blob"})}}const ue=new ho(vo),bo=l=>ue.get("/role/info",{id:l}),xe=l=>{const d=l?{roleIds:l}:{};return ue.post("/role/list",d)},go=l=>ue.get("/user/info",{username:l}),fe=l=>{const d=l?{userIds:l}:{};return ue.post("/user/list",d)};function yo(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!he(l)}const Vo=S({props:{node:{type:Object,required:!0}},setup(l){const{fields:d}=W("nodeHooks"),t=U(e("span",null,null));return{renderContent:()=>{var a,i;if(l.node.assigneeType==="choice")t.value=e("span",null,[`发起人自选（${l.node.choice?"多选":"单选"}）`]);else if(l.node.assigneeType==="self")t.value=e("span",null,["发起人自己"]);else if(l.node.assigneeType==="leader")t.value=e("span",null,[l.node.leader===1?"直属上级":`${l.node.leader}级上级`]);else if(l.node.assigneeType==="formUser"){const r=((a=d.value.find(h=>h.id===l.node.formUser))==null?void 0:a.title)||l.node.formUser||"?";t.value=e("span",null,[`表单内（${r}）角色`])}else if(l.node.assigneeType==="formRole"){const r=((i=d.value.find(h=>h.id===l.node.formRole))==null?void 0:i.title)||l.node.formRole||"?";t.value=e("span",null,[`表单内（${r}）角色`])}else l.node.assigneeType==="user"?l.node.users.length>0?fe(l.node.users).then(r=>{r.success&&(t.value=e("span",null,[r.data.map(h=>h.name).join("、")]))}):t.value=e("span",null,[k("未指定人员")]):l.node.assigneeType==="role"?l.node.roles.length>0?xe(l.node.roles).then(r=>{r.success&&(t.value=e("span",null,[r.data.map(h=>h.name).join("、")]))}):t.value=e("span",null,[k("未指定角色")]):t.value=e("span",null,[l.node.name]);return t.value}}},render(){let l;return e(K,null,yo(l=this.renderContent())?l:{default:()=>[l]})}}),$o=S({__name:"index",props:{node:{}},setup(l,{expose:d}){const t=l,o=U({showError:!1,message:""});return d({validate:()=>(o.value={showError:!1,message:""},t.node.assigneeType==="user"?t.node.users.length===0&&(o.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定人员`}):t.node.assigneeType==="role"?t.node.roles.length===0&&(o.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定角色`}):t.node.assigneeType==="formUser"?t.node.formRole||(o.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定表单内人员`}):t.node.assigneeType==="formRole"?t.node.formRole||(o.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定表单内角色`}):t.node.assigneeType==="leader"&&(t.node.leader||(o.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定多级上级`})),o.value)}),(i,r)=>(V(),C(ke,{icon:"Stamp",color:"linear-gradient(89.96deg, #FA6F32 .05%, #FB9337 79.83%)","error-info":o.value,node:i.node},{default:s(()=>[e(u(Vo),{node:i.node},null,8,["node"])]),_:1},8,["error-info","node"]))}});function ko(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!he(l)}const wo=S({props:{node:{type:Object,required:!0}},setup(l){const d=U(e("span",null,null));return{renderContent:()=>(l.node.users.length>0?fe(l.node.users).then(o=>{o.success&&(d.value=e("span",null,[o.data.map(a=>a.name).join("、")]))}):d.value=e("span",null,[k("未指定人员")]),d.value)}},render(){let l;return e(K,null,ko(l=this.renderContent())?l:{default:()=>[l]})}}),Eo=S({__name:"index",props:{node:{}},setup(l,{expose:d}){const t=l,o=U({showError:!1,message:""});return d({validate:()=>(o.value={showError:!1,message:""},t.node.users.length===0&&(o.value={showError:!0,message:`节点：[ ${t.node.name} ] 未指定抄送人`}),o.value)}),(i,r)=>(V(),C(ke,Vl({icon:"Promotion"},i.$attrs,{color:"#3296FA","error-info":o.value,node:i.node}),{default:s(()=>[e(u(wo),{node:i.node},null,8,["node"])]),_:1},16,["error-info","node"]))}});function Co(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!he(l)}const xo=S({props:{node:{type:Object,required:!0}},setup(l){const d=U(e("span",null,null));return{renderContent:()=>{if(l.node.def)d.value=e("span",null,[k("不满足条件时，进入默认条件")]);else if(l.node.conditions.conditions.length>0||l.node.conditions.groups.length>0){const o=l.node.conditions.conditions.length+l.node.conditions.groups.length;d.value=e("span",null,[k("已设置（"),o,k("）个条件")])}else d.value=e("span",null,[k("不满足条件时，进入默认条件")]);return d.value}}},render(){let l;return e(K,null,Co(l=this.renderContent())?l:{default:()=>[l]})}}),Po={class:"condition-box"},Uo=S({__name:"index",props:{node:{}},setup(l,{expose:d}){const t=l,o=U({showError:!1,message:""});return d({validate:()=>{if(o.value={showError:!1,message:""},!t.node.def)return t.node.conditions.conditions.length===0&&t.node.conditions.groups.length===0&&(o.value={showError:!0,message:`节点：[ ${t.node.name} ] 未设置条件`}),o.value}}),(i,r)=>(V(),O("div",Po,[e(ke,{icon:"Share",readOnly:i.node.def,"error-info":o.value,node:i.node},{default:s(()=>[e(u(xo),{node:i.node},null,8,["node"])]),_:1},8,["readOnly","error-info","node"])]))}});const Ro=A(Uo,[["__scopeId","data-v-f574f4d2"]]),we=l=>(me("data-v-1ca7350c"),l=l(),ve(),l),So={class:"branch-node"},Oo={class:"add-branch"},Io=we(()=>$("div",{class:ee("top-right-border")},null,-1)),Ao=we(()=>$("div",{class:ee("bottom-right-border")},null,-1)),To=we(()=>$("div",{class:ee("top-left-border")},null,-1)),qo=we(()=>$("div",{class:ee("bottom-left-border")},null,-1)),Fo=S({__name:"index",props:{node:{}},setup(l){const{addNode:d}=W("nodeHooks");return(t,o)=>(V(),O(q,null,[$("div",So,[$("div",Oo,[se(t.$slots,"default",{},void 0,!0)]),(V(!0),O(q,null,H(t.node.children,(a,i)=>(V(),O("div",{key:a.id,class:"col-box"},[t.node.children.length===i+1?(V(),O(q,{key:0},[Io,Ao],64)):N("",!0),i===0?(V(),O(q,{key:1},[To,qo],64)):N("",!0),e(hl,{node:a},null,8,["node"])]))),128))]),e(vl,{onAddNode:o[0]||(o[0]=a=>u(d)(a,t.node)),class:"branch-but"})],64))}});const No=A(Fo,[["__scopeId","data-v-1ca7350c"]]),Bo=S({__name:"index",props:{node:{}},setup(l){const{addNode:d}=W("nodeHooks");return(t,o)=>{const a=G;return V(),C(No,{node:t.node},{default:s(()=>[e(a,{type:"primary",onClick:o[0]||(o[0]=i=>u(d)("condition",t.node)),plain:"",round:""},{default:s(()=>[k("添加条件")]),_:1})]),_:1},8,["node"])}}});const zo={},jo={class:"node-box"};function Do(l,d){const t=K;return V(),O("div",jo,[e(t,{class:"end-node"},{default:s(()=>[k(" 结束 ")]),_:1})])}const Lo=A(zo,[["render",Do],["__scopeId","data-v-74763bb4"]]),Mo=S({name:"NodeTree"}),Ho=S({...Mo,props:{node:{}},setup(l){const d={start:mo,approval:$o,cc:Eo,condition:Ro,exclusive:Bo,end:Lo},{addNodeRef:t}=W("nodeHooks");return(o,a)=>{const i=Re("NodeTree");return V(),O(q,null,[se(o.$slots,"default",{},void 0,!0),(V(),C(Ue(d[o.node.type]),{node:o.node,ref:r=>r&&u(t)(o.node.id,r)},null,8,["node"])),o.node.child?(V(),C(i,{key:0,node:o.node.child},null,8,["node"])):N("",!0)],64)}}});const hl=A(Ho,[["__scopeId","data-v-64d33364"]]),Wo=S({__name:"index",props:{block:{type:Boolean,default:!0},modelValue:{}},emits:["update:modelValue"],setup(l,{emit:d}){const o=X(l,"modelValue",d);return(a,i)=>{const r=Ul;return V(),C(r,{modelValue:u(o),"onUpdate:modelValue":i[0]||(i[0]=h=>re(o)?o.value=h:null),class:ee(["el-segmented",{"is-block":a.block}])},{default:s(()=>[se(a.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","class"])}}});const Le=A(Wo,[["__scopeId","data-v-6406405a"]]),Go={class:"flex-center",style:{gap:"4px","grid-gap":"4px"}},Ko=S({__name:"UserTag",props:{username:{},type:{default:"info"},closable:{type:Boolean,default:!1}},emits:["close"],setup(l,{emit:d}){const t=l;let o=be({username:void 0,avatar:void 0,name:void 0});Ze(()=>{if(!t.username)throw new Error("username is required");go(t.username).then(h=>{h.success&&(o.username=h.data.username,o.avatar=h.data.avatar,o.name=h.data.name)})}),I(()=>{const h="/api";return h.startsWith("http")?h:window.location.origin+h});const a=de(),i=I(()=>pe[a.value||"default"]-12),r=()=>{d("close",t.username)};return(h,g)=>{const v=ol,x=tl;return V(),C(x,{round:"",closable:t.closable,type:h.type,effect:"light",onClose:r},{default:s(()=>[$("div",Go,[e(v,{size:i.value,src:u(o).avatar},{default:s(()=>[k(j((u(o).name||h.username).charAt(0)),1)]),_:1},8,["size","src"]),$("span",null,j(u(o).name||h.username),1)])]),_:1},8,["closable","type"])}}});const Me=A(Ko,[["__scopeId","data-v-11e894be"]]),Xo={class:"flex flex-1 flex-items-center flex-justify-between"},Yo={class:"flex-center"},Jo=S({__name:"UserPicker",props:{modelValue:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{expose:d,emit:t}){const o=l,a={label:"name",children:"children",isLeaf:"leaf",class:c=>x(c)},i=X(o,"modelValue",t),r=U([]),h=U([]),g=U(),v=U([]),x=c=>r.value.find(b=>b.id===c.id)?"is-active":"",E=c=>{if(c.type==="user")if(o.multiple){const _=r.value.findIndex(b=>b.id===c.id);_===-1?(r.value.push(c),r.value.sort((b,w)=>b.id.localeCompare(w.id))):r.value.splice(_,1)}else{const _=r.value.findIndex(b=>b.id===c.id);_===-1?r.value=[c]:r.value.splice(_,1)}},P=U(!1),R=be({name:null});el(()=>R.name,c=>{var _;(_=g.value)==null||_.filter(c)});const p=(c,_)=>c?_.name.includes(c):!0,n=()=>{P.value=!0},f=()=>{fe().then(_=>{_.success&&(h.value=_.data.map(b=>({id:b.username,name:b.name,type:"user",leaf:!0,avatar:b.avatar})))});let c=[];Array.isArray(i.value)?c.push(...i.value):i.value&&c.push(i.value),c.length>0?fe(c).then(_=>{_.success&&(r.value=_.data.map(b=>({id:b.username,name:b.name,avatar:b.avatar,type:"user",leaf:!0})),r.value.sort((b,w)=>b.id.localeCompare(w.id)))}):r.value=[]},m=()=>{o.multiple?i.value=r.value.map(c=>c.id):r.value.length>0?i.value=r.value[0].id:i.value=null,P.value=!1};return d({open:n}),(c,_)=>{const b=ge,w=ol,F=le,Y=nl,B=al,L=Oe,z=G,M=sl;return V(),C(M,{modelValue:P.value,"onUpdate:modelValue":_[2]||(_[2]=T=>P.value=T),onOpen:f,"align-center":"",draggable:"",title:"选择用户",width:"30%"},{footer:s(()=>[e(z,{onClick:_[1]||(_[1]=T=>P.value=!1)},{default:s(()=>[k("取消")]),_:1}),e(z,{type:"primary",onClick:m},{default:s(()=>[k("确认")]),_:1})]),default:s(()=>[e(L,{shadow:"never",class:"org-card"},{header:s(()=>[e(b,{modelValue:R.name,"onUpdate:modelValue":_[0]||(_[0]=T=>R.name=T),placeholder:"输入关键字进行查询",style:{width:"100%"},"suffix-icon":"search",clearable:""},null,8,["modelValue"])]),default:s(()=>[e(B,{tag:"div",class:"org-tree"},{default:s(()=>[e(Y,{ref_key:"orgTreeRef",ref:g,"node-key":"id",data:h.value,"default-expanded-keys":v.value,props:a,"filter-node-method":p,onNodeClick:E},{default:s(({data:T})=>[$("div",Xo,[$("div",Yo,[T.type==="user"?(V(),C(w,{key:0,size:25,src:T.avatar},{default:s(()=>[k(j(T.name.charAt(0)),1)]),_:2},1032,["src"])):(V(),C(F,{key:1,size:16},{default:s(()=>[e(u(fl))]),_:1})),k("  "+j(T.name),1)]),e(F,{class:"is-selected"},{default:s(()=>[e(u(_l))]),_:1})])]),_:1},8,["data","default-expanded-keys"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const He=A(Jo,[["__scopeId","data-v-54f06cf8"]]),Qo={class:"user-wrapper"},Zo=S({__name:"UserSelector",props:{modelValue:{},placeholder:{default:"请选择用户"},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},style:{}},emits:["update:modelValue"],setup(l,{emit:d}){const t=l,o=X(t,"modelValue",d),a=I(()=>o.value?Array.isArray(o.value)?o.value:[o.value]:[]),i=U(),r=rl(),h=de(),g=I(()=>r.value||t.disabled),v=()=>{var E;(E=i.value)==null||E.open()},x=E=>{o.value&&(t.multiple&&Array.isArray(o.value)?o.value.splice(o.value.indexOf(E),1):o.value=null)};return(E,P)=>{const R=le,p=G,n=K;return V(),O(q,null,[e(He,{ref_key:"userPickerRef",ref:i,multiple:E.multiple,modelValue:u(o),"onUpdate:modelValue":P[0]||(P[0]=f=>re(o)?o.value=f:null)},null,8,["multiple","modelValue"]),$("div",Qo,[e(p,{class:"user-but-item",size:u(h),disabled:g.value,onClick:v,circle:""},{default:s(()=>[e(R,null,{default:s(()=>[e(u(Dl))]),_:1})]),_:1},8,["size","disabled"]),(V(!0),O(q,null,H(a.value,f=>(V(),C(Me,{closable:!g.value,key:f,username:f,onClose:x},null,8,["closable","username"]))),128)),Z(e(n,{class:"placeholder"},{default:s(()=>[k(j(E.placeholder),1)]),_:1},512),[[oe,!u(o)||u(o).length===0]])])],64)}}});const et=A(Zo,[["__scopeId","data-v-478c5cf7"]]),lt=ye(Me),ot=ye(He),_e=dl(et,{userTag:Me,userPicker:He}),tt=Object.freeze(Object.defineProperty({__proto__:null,UserPicker:ot,UserSelector:_e,UserTag:lt,default:_e},Symbol.toStringTag,{value:"Module"})),nt={class:"flex-center",style:{gap:"4px","grid-gap":"4px"}},at=S({__name:"RoleTag",props:{id:{},type:{default:"info"},closable:{type:Boolean,default:!1}},emits:["close"],setup(l,{emit:d}){const t=l;let o=be({id:void 0,name:void 0});Ze(()=>{if(!t.id)throw new Error("username is required");bo(t.id).then(r=>{r.success&&(console.log(r),o.id=r.data.id,o.name=r.data.name)})}),I(()=>{const r="/api";return r.startsWith("http")?r:window.location.origin+r});const a=de();I(()=>pe[a.value||"default"]-12);const i=()=>{d("close",t.id)};return(r,h)=>{const g=tl;return V(),C(g,{round:"",closable:t.closable,type:r.type,effect:"light",onClose:i},{default:s(()=>[$("div",nt,[$("span",null,j(u(o).name||r.id),1)])]),_:1},8,["closable","type"])}}});const We=A(at,[["__scopeId","data-v-467ad35b"]]),st={class:"flex flex-1 flex-items-center flex-justify-between"},rt={class:"flex-center"},dt=S({__name:"RolePicker",props:{modelValue:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{expose:d,emit:t}){const o=l,a={label:"name",children:"children",isLeaf:"leaf",class:c=>x(c)},i=X(o,"modelValue",t),r=U([]),h=U([]),g=U(),v=U([]),x=c=>r.value.find(b=>b.id===c.id)?"is-active":"",E=c=>{if(o.multiple){const _=r.value.findIndex(b=>b.id===c.id);_===-1?(r.value.push(c),r.value.sort((b,w)=>b.id.localeCompare(w.id))):r.value.splice(_,1)}else{const _=r.value.findIndex(b=>b.id===c.id);_===-1?r.value=[c]:r.value.splice(_,1)}},P=U(!1),R=be({name:null});el(()=>R.name,c=>{var _;(_=g.value)==null||_.filter(c)});const p=(c,_)=>c?_.name.includes(c):!0,n=()=>{P.value=!0},f=()=>{xe().then(_=>{_.success&&(h.value=_.data.map(b=>({id:b.id,name:b.name})))});let c=[];Array.isArray(i.value)?c.push(...i.value):i.value&&c.push(i.value),c.length>0?xe(c).then(_=>{_.success&&(r.value=_.data.map(b=>({id:b.id,name:b.name})),r.value.sort((b,w)=>b.id.localeCompare(w.id)))}):r.value=[]},m=()=>{o.multiple?i.value=r.value.map(c=>c.id):r.value.length>0?i.value=r.value[0].id:i.value=null,P.value=!1};return d({open:n}),(c,_)=>{const b=ge,w=le,F=nl,Y=al,B=Oe,L=G,z=sl;return V(),C(z,{modelValue:P.value,"onUpdate:modelValue":_[2]||(_[2]=M=>P.value=M),onOpen:f,"align-center":"",draggable:"",title:"选择角色",width:"30%"},{footer:s(()=>[e(L,{onClick:_[1]||(_[1]=M=>P.value=!1)},{default:s(()=>[k("取消")]),_:1}),e(L,{type:"primary",onClick:m},{default:s(()=>[k("确认")]),_:1})]),default:s(()=>[e(B,{shadow:"never",class:"org-card"},{header:s(()=>[e(b,{modelValue:R.name,"onUpdate:modelValue":_[0]||(_[0]=M=>R.name=M),placeholder:"输入关键字进行查询",style:{width:"100%"},"suffix-icon":"search",clearable:""},null,8,["modelValue"])]),default:s(()=>[e(Y,{tag:"div",class:"org-tree"},{default:s(()=>[e(F,{ref_key:"orgTreeRef",ref:g,"node-key":"id",data:h.value,"default-expanded-keys":v.value,props:a,"filter-node-method":p,onNodeClick:E},{default:s(({data:M})=>[$("div",st,[$("div",rt,[e(w,{size:16},{default:s(()=>[e(u(fl))]),_:1}),k("  "+j(M.name),1)]),e(w,{class:"is-selected"},{default:s(()=>[e(u(_l))]),_:1})])]),_:1},8,["data","default-expanded-keys"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const Ge=A(dt,[["__scopeId","data-v-12a5ddcd"]]),ut={class:"role-wrapper"},it=S({__name:"RoleSelector",props:{modelValue:{},placeholder:{default:"请选择角色"},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},style:{}},emits:["update:modelValue"],setup(l,{emit:d}){const t=l,o=X(t,"modelValue",d),a=I(()=>o.value?Array.isArray(o.value)?o.value:[o.value]:[]),i=U(),r=rl(),h=de(),g=I(()=>r.value||t.disabled),v=()=>{var E;(E=i.value)==null||E.open()},x=E=>{o.value&&(t.multiple&&Array.isArray(o.value)?o.value.splice(o.value.indexOf(E),1):o.value=null)};return(E,P)=>{const R=le,p=G,n=K;return V(),O(q,null,[e(Ge,{ref_key:"RolePickerRef",ref:i,multiple:E.multiple,modelValue:u(o),"onUpdate:modelValue":P[0]||(P[0]=f=>re(o)?o.value=f:null)},null,8,["multiple","modelValue"]),$("div",ut,[e(p,{class:"role-but-item",size:u(h),disabled:g.value,onClick:v,circle:""},{default:s(()=>[e(R,null,{default:s(()=>[e(u(Ll))]),_:1})]),_:1},8,["size","disabled"]),(V(!0),O(q,null,H(a.value,f=>(V(),C(We,{closable:!g.value,key:f,id:f,onClose:x},null,8,["closable","id"]))),128)),Z(e(n,{class:"placeholder"},{default:s(()=>[k(j(E.placeholder),1)]),_:1},512),[[oe,!u(o)||u(o).length===0]])])],64)}}});const ct=A(it,[["__scopeId","data-v-05f71629"]]),pt=ye(We),ft=ye(Ge),Pe=dl(ct,{roleTag:We,rolePicker:Ge}),_t=Object.freeze(Object.defineProperty({__proto__:null,RolePicker:ft,RoleSelector:Pe,RoleTag:pt,default:Pe},Symbol.toStringTag,{value:"Module"})),ie=l=>(me("data-v-974ab3f1"),l=l(),ve(),l),mt={class:"flow-opt-item"},vt={class:"flow-opt-item__content"},ht=ie(()=>$("div",{class:"flow-opt-item__second"}," 同意描述、同意描述、同意描述、同意描述、同意描述、同意描述 ",-1)),bt={class:"flow-opt-item"},gt={class:"flow-opt-item__content"},yt=ie(()=>$("div",{class:"flow-opt-item__second"}," 拒绝描述、拒绝描述、拒绝描述、拒绝描述、拒绝描述、拒绝描述 ",-1)),Vt={class:"flow-opt-item"},$t={class:"flow-opt-item__content"},kt=ie(()=>$("div",{class:"flow-opt-item__second"}," 转办描述、转办描述、转办描述、转办描述、转办描述、转办描述 ",-1)),wt={class:"flow-opt-item"},Et={class:"flow-opt-item__content"},Ct=ie(()=>$("div",{class:"flow-opt-item__second"}," 加签描述、加签描述、加签描述、加签描述、加签描述、加签描述 ",-1)),xt={class:"flow-opt-item"},Pt={class:"flow-opt-item__content"},Ut=ie(()=>$("div",{class:"flow-opt-item__second"}," 减签描述、减签描述、减签描述、减签描述、减签描述、减签描述 ",-1)),Rt=S({__name:"ApprovalAttr",props:{node:{}},emits:["update:node"],setup(l,{emit:d}){const t=l,o=U("properties"),{node:a}=te(t,d),{fields:i}=W("nodeHooks"),r=I({get(){return a.value.formProperties.every(p=>p.writeable)},set(p){a.value.formProperties.forEach(n=>n.writeable=p),p?(g.value=!1,v.value=!1):h.value=!1}}),h=I({get(){return a.value.formProperties.every(p=>p.required)},set(p){a.value.formProperties.forEach(n=>n.required=p),p&&(r.value=!0,g.value=!1,v.value=!1)}}),g=I({get(){return a.value.formProperties.every(p=>p.readable)},set(p){a.value.formProperties.forEach(n=>n.readable=p),p&&(r.value=!1,v.value=!1,h.value=!1)}}),v=I({get(){return a.value.formProperties.every(p=>p.hidden)},set(p){a.value.formProperties.forEach(n=>n.hidden=p),p&&(r.value=!1,h.value=!1,g.value=!1)}}),x=p=>{p.readable&&(p.writeable=!1,p.required=!1,p.hidden=!1)},E=p=>{p.required&&(p.writeable=!0,p.readable=!1,p.hidden=!1)},P=p=>{p.writeable?(p.readable=!1,p.hidden=!1):p.required=!1},R=p=>{p.hidden&&(p.readable=!1,p.writeable=!1,p.required=!1)};return Se(()=>{const p=a.value.formProperties;a.value.formProperties=i.value.filter(n=>n.value!==void 0).map(n=>({id:n.id,name:n.title,readable:n.props.disabled||!1,writeable:!n.props.disabled||!1,hidden:n.props.hidden||!1,required:n.props.required&&!n.props.disabled||!1})),a.value.formProperties.forEach(n=>{const f=p.find(m=>m.id===n.id);f&&(n.readable=f.readable,n.writeable=f.writeable,n.hidden=f.hidden,n.required=f.required)})}),(p,n)=>{const f=ul,m=Rl,c=Ie,_=Sl,b=K,w=Ve,F=Ae,Y=Te,B=qe,L=Fe,z=$e,M=Ne,T=le,ne=Be,ae=Ol;return V(),C(u(Le),{modelValue:o.value,"onUpdate:modelValue":n[18]||(n[18]=y=>o.value=y),stretch:"",block:!1},{default:s(()=>[e(B,{label:"设置审批人",name:"properties"},{default:s(()=>[e(Y,{"label-position":"top","label-width":"90px"},{default:s(()=>[e(c,{prop:"assigneeType",label:"审批对象"},{default:s(()=>[e(m,{modelValue:u(a).assigneeType,"onUpdate:modelValue":n[0]||(n[0]=y=>u(a).assigneeType=y)},{default:s(()=>[e(f,{label:"user"},{default:s(()=>[k("指定人员")]),_:1}),e(f,{label:"role"},{default:s(()=>[k("指定角色")]),_:1}),e(f,{label:"choice"},{default:s(()=>[k("发起人自选")]),_:1}),e(f,{label:"self"},{default:s(()=>[k("发起人自己")]),_:1}),e(f,{label:"leader"},{default:s(()=>[k("多级上级")]),_:1}),e(f,{label:"formUser"},{default:s(()=>[k("表单内人员")]),_:1}),e(f,{label:"formRole"},{default:s(()=>[k("表单内角色")]),_:1})]),_:1},8,["modelValue"])]),_:1}),u(a).assigneeType==="user"?(V(),C(c,{key:0,prop:"users",label:"指定人员"},{default:s(()=>[e(u(_e),{multiple:"",placeholder:"请选择人员",modelValue:u(a).users,"onUpdate:modelValue":n[1]||(n[1]=y=>u(a).users=y)},null,8,["modelValue"])]),_:1})):N("",!0),u(a).assigneeType==="choice"?(V(),C(c,{key:1,prop:"selfSelect",label:"发起人自选择"},{default:s(()=>[e(m,{modelValue:u(a).choice,"onUpdate:modelValue":n[2]||(n[2]=y=>u(a).choice=y)},{default:s(()=>[e(_,{label:!1},{default:s(()=>[k("单选")]),_:1}),e(_,{label:!0},{default:s(()=>[k("多选")]),_:1})]),_:1},8,["modelValue"])]),_:1})):N("",!0),u(a).assigneeType==="self"?(V(),C(c,{key:2,prop:"self",label:"发起人自己"},{default:s(()=>[e(b,null,{default:s(()=>[k(" 发起人自己作为审批人进行审批 ")]),_:1})]),_:1})):N("",!0),u(a).assigneeType==="leader"?(V(),C(c,{key:3,prop:"leader",label:"多级上级"},{default:s(()=>[e(F,{modelValue:u(a).leader,"onUpdate:modelValue":n[3]||(n[3]=y=>u(a).leader=y),placeholder:"请选择多级上级"},{default:s(()=>[e(w,{label:"直属上级",value:1}),e(w,{label:"2级上级",value:2}),e(w,{label:"3级上级",value:3}),e(w,{label:"4级上级",value:4}),e(w,{label:"5级上级",value:5}),e(w,{label:"6级上级",value:6}),e(w,{label:"7级上级",value:7}),e(w,{label:"8级上级",value:8}),e(w,{label:"9级上级",value:9}),e(w,{label:"10级上级",value:10}),e(w,{label:"11级上级",value:11})]),_:1},8,["modelValue"])]),_:1})):N("",!0),u(a).assigneeType==="role"?(V(),C(c,{key:4,prop:"roles",label:"指定角色"},{default:s(()=>[e(u(Pe),{multiple:"",placeholder:"请选择角色",modelValue:u(a).roles,"onUpdate:modelValue":n[4]||(n[4]=y=>u(a).roles=y)},null,8,["modelValue"])]),_:1})):N("",!0),u(a).assigneeType==="formUser"?(V(),C(c,{key:5,prop:"formUser",label:"表单内人员"},{default:s(()=>[e(F,{placeholder:"选择表单内人员",modelValue:u(a).formUser,"onUpdate:modelValue":n[5]||(n[5]=y=>u(a).formUser=y)},{default:s(()=>[(V(!0),O(q,null,H(u(i).filter(y=>y.name==="UserSelection"),y=>(V(),C(w,{key:y.id,label:y.title,value:y.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):N("",!0),u(a).assigneeType==="formRole"?(V(),C(c,{key:6,prop:"formRole",label:"表单内角色"},{default:s(()=>[e(F,{placeholder:"选择表单内角色",modelValue:u(a).formRole,"onUpdate:modelValue":n[6]||(n[6]=y=>u(a).formRole=y)},{default:s(()=>[(V(!0),O(q,null,H(u(i).filter(y=>y.name==="RoleSelection"),y=>(V(),C(w,{key:y.id,label:y.title,value:y.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):N("",!0),e(c,{prop:"method",label:"多人审批方式"},{default:s(()=>[e(m,{class:"flex-column",modelValue:u(a).multi,"onUpdate:modelValue":n[7]||(n[7]=y=>u(a).multi=y)},{default:s(()=>[e(f,{label:"sequential"},{default:s(()=>[k("依次审批（按顺序审批）")]),_:1}),e(f,{label:"joint"},{default:s(()=>[k("会签（需要所有审批人都通过才可通过）")]),_:1}),e(f,{label:"single"},{default:s(()=>[k("或签（其中一名审批人通过或驳回即可）")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"nobody",label:"审批人为空"},{default:s(()=>[e(m,{modelValue:u(a).nobody,"onUpdate:modelValue":n[8]||(n[8]=y=>u(a).nobody=y)},{default:s(()=>[e(f,{label:"pass"},{default:s(()=>[k("自动通过")]),_:1}),e(f,{label:"reject"},{default:s(()=>[k("自动驳回")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(B,{label:"表单权限",name:"formPermissions"},{default:s(()=>[e(M,{data:u(a).formProperties,style:{width:"100%"}},{default:s(()=>[e(L,{prop:"name",label:"字段"}),e(L,{prop:"readable"},{header:s(()=>[e(z,{modelValue:g.value,"onUpdate:modelValue":n[9]||(n[9]=y=>g.value=y),label:"可读"},null,8,["modelValue"])]),default:s(({row:y})=>[e(z,{modelValue:y.readable,"onUpdate:modelValue":D=>y.readable=D,onChange:D=>x(y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(L,{prop:"writeable"},{header:s(()=>[e(z,{modelValue:r.value,"onUpdate:modelValue":n[10]||(n[10]=y=>r.value=y),label:"可写"},null,8,["modelValue"])]),default:s(({row:y})=>[e(z,{modelValue:y.writeable,"onUpdate:modelValue":D=>y.writeable=D,onChange:D=>P(y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(L,{prop:"required"},{header:s(()=>[e(z,{modelValue:h.value,"onUpdate:modelValue":n[11]||(n[11]=y=>h.value=y),label:"必填"},null,8,["modelValue"])]),default:s(({row:y})=>[e(z,{modelValue:y.required,"onUpdate:modelValue":D=>y.required=D,onChange:D=>E(y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(L,{prop:"hidden"},{header:s(()=>[e(z,{modelValue:v.value,"onUpdate:modelValue":n[12]||(n[12]=y=>v.value=y),label:"隐藏"},null,8,["modelValue"])]),default:s(({row:y})=>[e(z,{modelValue:y.hidden,"onUpdate:modelValue":D=>y.hidden=D,onChange:D=>R(y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1}),e(B,{label:"操作权限",name:"operationPermissions"},{default:s(()=>[$("div",mt,[e(T,{size:32,class:"flow-opt-item__icon"},{default:s(()=>[e(u(Ml))]),_:1}),$("div",vt,[e(b,{tag:"b"},{default:s(()=>[k(" 同意 ")]),_:1}),ht]),e(ne,{modelValue:u(a).operations.complete,"onUpdate:modelValue":n[13]||(n[13]=y=>u(a).operations.complete=y),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ae),$("div",bt,[e(T,{size:32,class:"flow-opt-item__icon"},{default:s(()=>[e(u(je))]),_:1}),$("div",gt,[e(b,{tag:"b"},{default:s(()=>[k(" 拒绝 ")]),_:1}),yt]),e(ne,{modelValue:u(a).operations.refuse,"onUpdate:modelValue":n[14]||(n[14]=y=>u(a).operations.refuse=y),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ae),$("div",Vt,[e(T,{size:32,class:"flow-opt-item__icon"},{default:s(()=>[e(u(Hl))]),_:1}),$("div",$t,[e(b,{tag:"b"},{default:s(()=>[k(" 转办 ")]),_:1}),kt]),e(ne,{modelValue:u(a).operations.transfer,"onUpdate:modelValue":n[15]||(n[15]=y=>u(a).operations.transfer=y),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ae),$("div",wt,[e(T,{size:32,class:"flow-opt-item__icon"},{default:s(()=>[e(u(ze))]),_:1}),$("div",Et,[e(b,{tag:"b"},{default:s(()=>[k(" 加签 ")]),_:1}),Ct]),e(ne,{modelValue:u(a).operations.addMulti,"onUpdate:modelValue":n[16]||(n[16]=y=>u(a).operations.addMulti=y),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ae),$("div",xt,[e(T,{size:32,class:"flow-opt-item__icon"},{default:s(()=>[e(u(ml))]),_:1}),$("div",Pt,[e(b,{tag:"b"},{default:s(()=>[k(" 减签 ")]),_:1}),Ut]),e(ne,{modelValue:u(a).operations.minusMulti,"onUpdate:modelValue":n[17]||(n[17]=y=>u(a).operations.minusMulti=y),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),e(ae)]),_:1})]),_:1},8,["modelValue"])}}});const St=A(Rt,[["__scopeId","data-v-974ab3f1"]]),Ot=S({__name:"CcAttr",props:{node:{}},emits:["update:node"],setup(l,{emit:d}){const t=l,o=U("properties"),{node:a}=te(t,d),{fields:i}=W("nodeHooks"),r=I({get(){return a.value.formProperties.every(g=>g.readable)},set(g){a.value.formProperties.forEach(v=>v.readable=g),h.value=!g}}),h=I({get(){return a.value.formProperties.every(g=>g.hidden)},set(g){a.value.formProperties.forEach(v=>v.hidden=g),r.value=!g}});return Se(()=>{const g=a.value.formProperties;a.value.formProperties=i.value.filter(v=>v.value!==void 0).map(v=>({id:v.id,name:v.title,readable:!0,writeable:!1,required:!1,hidden:v.props.hidden||!1})),a.value.formProperties.forEach(v=>{const x=g.find(E=>E.id===v.id);x&&(v.readable=x.readable,v.writeable=x.writeable,v.hidden=x.hidden,v.required=x.required)})}),(g,v)=>{const x=_e,E=Ie,P=Te,R=qe,p=Fe,n=$e,f=Ne;return V(),C(u(Le),{modelValue:o.value,"onUpdate:modelValue":v[3]||(v[3]=m=>o.value=m),stretch:"",block:!1},{default:s(()=>[e(R,{label:"设置抄送人",name:"properties"},{default:s(()=>[e(P,{"label-position":"top","label-width":"90px"},{default:s(()=>[e(E,{prop:"users",label:"抄送人"},{default:s(()=>[e(x,{multiple:"",placeholder:"请选择人员",modelValue:u(a).users,"onUpdate:modelValue":v[0]||(v[0]=m=>u(a).users=m)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(R,{label:"表单权限",name:"formPermissions"},{default:s(()=>[e(f,{data:u(a).formProperties,style:{width:"100%"}},{default:s(()=>[e(p,{prop:"name",label:"字段"}),e(p,{prop:"readable"},{header:s(()=>[e(n,{modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=m=>r.value=m),label:"可读"},null,8,["modelValue"])]),default:s(({row:m})=>[e(n,{modelValue:m.readable,"onUpdate:modelValue":c=>m.readable=c,onChange:c=>m.hidden=!c},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(p,{prop:"hidden"},{header:s(()=>[e(n,{modelValue:h.value,"onUpdate:modelValue":v[2]||(v[2]=m=>h.value=m),label:"隐藏"},null,8,["modelValue"])]),default:s(({row:m})=>[e(n,{modelValue:m.hidden,"onUpdate:modelValue":c=>m.hidden=c,onChange:c=>m.readable=!c},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])}}}),It=S({__name:"StartAttr",props:{node:{}},emits:["update:node"],setup(l,{emit:d}){const t=l,o=U("formPermissions"),{node:a}=te(t,d),{fields:i}=W("nodeHooks"),r=I({get(){return a.value.formProperties.every(p=>p.writeable)},set(p){a.value.formProperties.forEach(n=>n.writeable=p),p?(g.value=!1,v.value=!1):h.value=!1}}),h=I({get(){return a.value.formProperties.every(p=>p.required)},set(p){a.value.formProperties.forEach(n=>n.required=p),p&&(r.value=!0,g.value=!1,v.value=!1)}}),g=I({get(){return a.value.formProperties.every(p=>p.readable)},set(p){a.value.formProperties.forEach(n=>n.readable=p),p&&(r.value=!1,v.value=!1,h.value=!1)}}),v=I({get(){return a.value.formProperties.every(p=>p.hidden)},set(p){a.value.formProperties.forEach(n=>n.hidden=p),p&&(r.value=!1,h.value=!1,g.value=!1)}}),x=p=>{p.hidden&&(p.readable=!1,p.writeable=!1,p.required=!1)},E=p=>{p.writeable?(p.readable=!1,p.hidden=!1):p.required=!1},P=p=>{p.readable&&(p.writeable=!1,p.required=!1,p.hidden=!1)},R=p=>{p.required&&(p.writeable=!0,p.readable=!1,p.hidden=!1)};return Se(()=>{const p=a.value.formProperties;a.value.formProperties=i.value.filter(n=>n.value!==void 0).map(n=>({id:n.id,name:n.title,readable:n.props.disabled||!1,writeable:!n.props.disabled||!1,hidden:n.props.hidden||!1,required:n.props.required&&!n.props.disabled||!1})),a.value.formProperties.forEach(n=>{const f=p.find(m=>m.id===n.id);f&&(n.readable=f.readable,n.writeable=f.writeable,n.hidden=f.hidden,n.required=f.required)})}),(p,n)=>{const f=Fe,m=$e,c=Ne,_=qe;return V(),C(u(Le),{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=b=>o.value=b),stretch:"",block:!1},{default:s(()=>[e(_,{label:"表单权限",name:"formPermissions"},{default:s(()=>[e(c,{data:u(a).formProperties,style:{width:"100%"}},{default:s(()=>[e(f,{prop:"name",label:"字段"}),e(f,{prop:"readable"},{header:s(()=>[e(m,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=b=>g.value=b),label:"可读"},null,8,["modelValue"])]),default:s(({row:b})=>[e(m,{modelValue:b.readable,"onUpdate:modelValue":w=>b.readable=w,onChange:w=>P(b)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(f,{prop:"writeable"},{header:s(()=>[e(m,{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=b=>r.value=b),label:"可写"},null,8,["modelValue"])]),default:s(({row:b})=>[e(m,{modelValue:b.writeable,"onUpdate:modelValue":w=>b.writeable=w,onChange:w=>E(b)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(f,{prop:"required"},{header:s(()=>[e(m,{modelValue:h.value,"onUpdate:modelValue":n[2]||(n[2]=b=>h.value=b),label:"必填"},null,8,["modelValue"])]),default:s(({row:b})=>[e(m,{modelValue:b.required,"onUpdate:modelValue":w=>b.required=w,onChange:w=>R(b)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(f,{prop:"hidden"},{header:s(()=>[e(m,{modelValue:v.value,"onUpdate:modelValue":n[3]||(n[3]=b=>v.value=b),label:"隐藏"},null,8,["modelValue"])]),default:s(({row:b})=>[e(m,{modelValue:b.hidden,"onUpdate:modelValue":w=>b.hidden=w,onChange:w=>x(b)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1}),e(_,{label:"操作权限",name:"operationPermissions"},{default:s(()=>[k(" 待添加... ")]),_:1})]),_:1},8,["modelValue"])}}}),At=S({__name:"Trigger",props:{modelValue:{},options:{},filterRules:{}},emits:["update:modelValue"],setup(l,{emit:d}){const t=l,o=X(t,"modelValue",d);return(a,i)=>{const r=Ve,h=Ae;return V(),C(h,{class:"trigger-container",modelValue:u(o),"onUpdate:modelValue":i[0]||(i[0]=g=>re(o)?o.value=g:null),filterable:"",placeholder:"选择字段"},{default:s(()=>[(V(!0),O(q,null,H(t.options,g=>(V(),C(r,{key:g.id,label:g.title,value:g.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}}),Tt=S({__name:"Operator",props:{modelValue:{}},emits:["update:modelValue"],setup(l,{emit:d}){const t=l,o=[{value:"equal",label:"等于"},{value:"not_equal",label:"不等于"},{label:"包含",value:"contains"},{label:"不包含",value:"not_contain"}],a=X(t,"modelValue",d);return(i,r)=>{const h=Ve,g=Ae;return V(),C(g,{class:"operator-container",modelValue:u(a),"onUpdate:modelValue":r[0]||(r[0]=v=>re(a)?a.value=v:null),filterable:"",placeholder:"筛选符"},{default:s(()=>[(V(),O(q,null,H(o,v=>e(h,{key:v.value,label:v.label,value:v.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])}}});const qt=A(Tt,[["__scopeId","data-v-b7adb9aa"]]),Ft="modulepreload",Nt=function(l){return"/lowflow-design/"+l},Je={},Q=function(d,t,o){if(!t||t.length===0)return d();const a=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=Nt(i),i in Je)return;Je[i]=!0;const r=i.endsWith(".css"),h=r?'[rel="stylesheet"]':"";if(!!o)for(let x=a.length-1;x>=0;x--){const E=a[x];if(E.href===i&&(!r||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${h}`))return;const v=document.createElement("link");if(v.rel=r?"stylesheet":Ft,r||(v.as="script",v.crossOrigin=""),v.href=i,document.head.appendChild(v),r)return new Promise((x,E)=>{v.addEventListener("load",x),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>d()).catch(i=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=i,window.dispatchEvent(r),!r.defaultPrevented)throw i})},Bt=S({props:{modelValue:{type:[String,Number,Boolean,Array,Object],default:void 0,required:!1},field:{type:Object,required:!0}},emits:["update:modelValue"],components:{Input:J(()=>Q(()=>import("./element-plus-0efb83dc.js").then(l=>l.O),["assets/js/element-plus-0efb83dc.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-d053c1a3.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-3fa56043.css"]).then(({ElInput:l})=>l)),Number:J(()=>Q(()=>import("./element-plus-0efb83dc.js").then(l=>l.O),["assets/js/element-plus-0efb83dc.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-d053c1a3.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-3fa56043.css"]).then(({ElInputNumber:l})=>l)),Select:J(()=>Q(()=>import("./element-plus-0efb83dc.js").then(l=>l.O),["assets/js/element-plus-0efb83dc.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-d053c1a3.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-3fa56043.css"]).then(({ElSelect:l})=>l)),Radio:J(()=>Q(()=>import("./element-plus-0efb83dc.js").then(l=>l.O),["assets/js/element-plus-0efb83dc.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-d053c1a3.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-3fa56043.css"]).then(({ElRadio:l})=>l)),Checkbox:J(()=>Q(()=>import("./element-plus-0efb83dc.js").then(l=>l.O),["assets/js/element-plus-0efb83dc.js","assets/js/@vue-fa59abb2.js","assets/js/lodash-es-21c98b27.js","assets/js/@vueuse-159cba4b.js","assets/js/@element-plus-d053c1a3.js","assets/js/@sxzz-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-f21ac596.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-593301b5.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-72671fae.js","assets/css/element-plus-3fa56043.css"]).then(({ElCheckbox:l})=>l)),UserSelection:J(()=>Q(()=>Promise.resolve().then(()=>tt),void 0)),RoleSelection:J(()=>Q(()=>Promise.resolve().then(()=>_t),void 0))},setup(l,{emit:d}){return{buildProps:a=>{const i={},r=a.props||{};return Object.keys(r).forEach(h=>{i[h]=r[h]}),l.modelValue!==void 0?i.modelValue=l.modelValue:i.modelValue=a.value,i["onUpdate:modelValue"]=h=>{d("update:modelValue",h)},delete i.options,i},buildSlots:a=>{let i={};const h={Select:g=>g.props.options.map(v=>e(Ve,{label:v.label,value:v.value},null)),Radio:g=>g.props.options.map(v=>e(ul,{label:v.value},{default:()=>[v.label]})),Checkbox:g=>g.props.options.map(v=>e($e,{label:v.value},{default:()=>[v.label]}))}[a.name];return h&&(i.default=()=>h(a)),i}}},render(){const l=Jl(this.field),d=this.buildSlots(l),t=this.buildProps(l),o=Re(l.name);return typeof o=="string"?Xe(o,t,d):Xe(o,t,d)}}),zt=l=>(me("data-v-9daa512b"),l=l(),ve(),l),jt={class:"filter-container"},Dt={class:"logical-operator"},Lt=zt(()=>$("div",{class:"logical-operator__line"},null,-1)),Mt={class:"filter-option-content"},Ht={key:0,class:"filter-item-rule"},Wt={class:"filter-item-rule"},Gt=S({name:"ConditionFilter"}),Kt=S({...Gt,props:{filterFields:{},modelValue:{}},emits:["update:modelValue","addCondition","delCondition","delGroup"],setup(l,{emit:d}){const t=l,o=X(t,"modelValue",d),a=()=>{o.value.conditions.push({field:null,operator:"equal",value:null})},i=g=>{o.value.conditions.splice(g,1),o.value.conditions.length<=0&&d("delGroup"),d("delCondition",g)},r=()=>{o.value.groups.push({logicalOperator:"and",conditions:[{field:null,operator:"",value:null}],groups:[]})},h=g=>{o.value.groups.splice(g,1)};return(g,v)=>{const x=Be,E=Ie,P=Il,R=G,p=Al,n=Re("ConditionFilter"),f=Te;return V(),O("div",jt,[$("div",Dt,[Lt,e(x,{modelValue:u(o).logicalOperator,"onUpdate:modelValue":v[0]||(v[0]=m=>u(o).logicalOperator=m),"inline-prompt":"",style:{"--el-switch-on-color":"#409EFF","--el-switch-off-color":"#67C23A"},"active-value":"and","inactive-value":"or","active-text":"且","inactive-text":"或"},null,8,["modelValue"])]),$("div",Mt,[e(f,{"label-width":0,inline:!0,model:u(o)},{default:s(()=>[(V(!0),O(q,null,H(u(o).conditions,(m,c)=>(V(),C(p,{key:`${m.field}-${c}`,gutter:5,class:"filter-item-rule"},{default:s(()=>[e(P,{xs:24,sm:7},{default:s(()=>[e(E,{prop:"conditions."+c+".field",style:{width:"100%"}},{default:s(()=>[e(At,{ref_for:!0,ref:"triggerRef",options:t.filterFields.filter(_=>_.value!==void 0),"filter-rules":u(o),modelValue:m.field,"onUpdate:modelValue":[_=>m.field=_,_=>m.value=null]},null,8,["options","filter-rules","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),m.field?(V(),C(P,{key:0,xs:24,sm:5},{default:s(()=>[e(E,{prop:"conditions."+c+".operator",style:{width:"100%"}},{default:s(()=>[e(qt,{ref_for:!0,ref:"operatorRef",modelValue:m.operator,"onUpdate:modelValue":_=>m.operator=_},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)):N("",!0),m.field?(V(),C(P,{key:1,xs:24,sm:10},{default:s(()=>[e(E,{prop:"conditions."+c+".value",style:{width:"100%"}},{default:s(()=>[e(u(Bt),{field:t.filterFields.find(_=>_.id===m.field),modelValue:m.value,"onUpdate:modelValue":_=>m.value=_},null,8,["field","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)):N("",!0),e(P,{xs:24,sm:2,style:{display:"flex","align-items":"center","flex-direction":"row-reverse"}},{default:s(()=>[e(R,{plain:"",circle:"",type:"danger",icon:u(Wl),onClick:_=>i(c)},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1024))),128)),(V(!0),O(q,null,H(u(o).groups,(m,c)=>(V(),C(n,{key:c,onDelGroup:_=>h(c),modelValue:u(o).groups[c],"onUpdate:modelValue":_=>u(o).groups[c]=_,filterFields:g.filterFields},{default:s(()=>[e(R,{onClick:_=>h(c),icon:u(je),class:"filter-filter-item__add"},{default:s(()=>[k(" 删除条件组 ")]),_:2},1032,["onClick","icon"])]),_:2},1032,["onDelGroup","modelValue","onUpdate:modelValue","filterFields"]))),128)),u(o).groups.length===0&&u(o).conditions.length===0?(V(),O("div",Ht)):N("",!0)]),_:1},8,["model"]),$("div",Wt,[e(R,{onClick:a,icon:u(Ye),class:"filter-filter-item__add"},{default:s(()=>[k(" 添加条件 ")]),_:1},8,["icon"]),e(R,{onClick:r,icon:u(Ye),class:"filter-filter-item__add"},{default:s(()=>[k(" 添加条件组 ")]),_:1},8,["icon"]),se(g.$slots,"default",{},void 0,!0)])])])}}});const Xt=A(Kt,[["__scopeId","data-v-9daa512b"]]),Yt=S({__name:"ConditionAttr",props:{node:{}},emits:["update:node"],setup(l,{emit:d}){const t=l,{node:o}=te(t,d),{fields:a}=W("nodeHooks");return(i,r)=>(V(),C(Xt,{modelValue:u(o).conditions,"onUpdate:modelValue":r[0]||(r[0]=h=>u(o).conditions=h),"filter-fields":u(a)},null,8,["modelValue","filter-fields"]))}}),Jt=["id"],Qt=S({__name:"index",setup(l,{expose:d}){const t={start:It,approval:St,cc:Ot,condition:Yt};let o=U({id:"",pid:"",type:"",name:"",child:null});const a=U(!1),i=U(!1),r=()=>{i.value&&(i.value=!1)};return d({open:g=>{o.value=g,a.value=!0}}),(g,v)=>{const x=ge,E=Tl,P=ql;return V(),C(P,{modelValue:a.value,"onUpdate:modelValue":v[2]||(v[2]=R=>a.value=R),size:"35%"},{header:s(({titleId:R,titleClass:p})=>[$("span",{id:R,class:ee(p)},[Z(e(x,{onBlur:r,maxlength:"30",modelValue:u(o).name,"onUpdate:modelValue":v[0]||(v[0]=n=>u(o).name=n)},null,8,["modelValue"]),[[u(ll),r],[oe,i.value]]),Z(e(E,{icon:"EditPen",onClick:v[1]||(v[1]=n=>i.value=!0)},{default:s(()=>[k(j(u(o).name),1)]),_:1},512),[[oe,!i.value]])],10,Jt)]),default:s(()=>[(V(),C(Ue(t[u(o).type]),{node:u(o)},null,8,["node"]))]),_:1},8,["modelValue"])}}});const Zt=A(Qt,[["__scopeId","data-v-d67ff789"]]),en=(l,d)=>{const t=U(new Map),o=U(new Map),a=()=>(t.value.clear(),o.value.forEach((n,f)=>{const m=n==null?void 0:n.validate;if(m){const c=m();c&&c.showError&&t.value.set(f,c.message)}}),t),i=(n,f)=>{o.value.set(n,f)},r=()=>{let n=`node-${Math.random().toString(36).substring(2,7)}`;const f=(m,c)=>{if(m.id===c)return!0;if(m.child)return f(m.child,c);if("children"in m){const _=m;if(_.children&&_.children.length>0)return _.children.some(b=>f(b,c))}return!1};return f(l.value,n)?r():n},h=n=>{const f=n;f.children.unshift({id:r(),pid:n.id,type:"condition",def:!1,name:`条件${f.children.length+1}`,conditions:{logicalOperator:"and",conditions:[],groups:[]},child:null})},E={condition:h,approval:n=>{const f=n.child,m=r();n.child={id:m,pid:n.id,type:"approval",name:"审批人",child:f,assigneeType:"user",formUser:"",formRole:"",users:[],roles:[],leader:1,choice:!1,self:!1,multi:"sequential",nobody:"pass",formProperties:d.value.map(c=>({id:c.id,name:c.title,readable:!0,writeable:!1,hidden:!1,required:!1})),operations:{complete:!0,refuse:!0,save:!0,transfer:!1,addMulti:!1,minusMulti:!1}},f&&(f.pid=m)},cc:n=>{const f=n.child,m=r();n.child={id:m,pid:n.id,type:"cc",name:"抄送人",child:f,users:[],formProperties:d.value.map(c=>({id:c.id,name:c.title,readable:!0,writeable:!1,hidden:!1,required:!1}))},f&&(f.pid=m)},exclusive:n=>{const f=n.child,m=r(),c={id:m,pid:n.id,type:"exclusive",name:"独占网关",child:f,children:[]};if(n.child=c,f&&(f.pid=m),h(n.child),h(n.child),c.children.length>0){const _=c.children[c.children.length-1];_.def=!0,_.name="默认条件"}}},P=(n,f)=>{const m=E[n];m&&m(f)},R=n=>{p(l.value,n)},p=(n,f)=>{var m;if(n.id===f.pid)if("children"in n&&((m=n.child)==null?void 0:m.id)!==f.id){const c=n,_=c.children.findIndex(b=>b.id===f.id);_!==-1&&(c.children.length<=2?R(c):c.children.splice(_,1))}else f.child&&f.child.pid&&(f.child.pid=n.id),n.child=f.child;else if(n.child&&p(n.child,f),"children"in n){const c=n;c.children&&c.children.length>0&&c.children.forEach(_=>{p(_,f)})}};return{addNode:P,delNode:R,addNodeRef:i,validateNodes:a,nodeErrors:t}},ln=async l=>{const d=await ue.download("https://www.666cxf.com/stage-api/workflow/model/download",l);Ql.saveAs(new Blob([d],{type:"application/octet-stream;charset=utf-8"}),"测试流程.bpmn20.xml")},on={class:"designer-container"},tn={class:"dark"},nn={class:"zoom"},an={class:"node-container"},sn=S({name:"flowDesign"}),rn=S({...sn,props:{process:{},fields:{}},emits:["update:process","update:fields"],setup(l,{emit:d}){const t=l;Qe(c=>({"75f86714":h.value}));const{process:o,fields:a}=te(t,d),i=U(),r=U(100),h=I(()=>r.value/100),g=U(!1),v=()=>{g.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},x=c=>{var _;(_=i.value)==null||_.open(c)},{addNode:E,delNode:P,validateNodes:R,addNodeRef:p}=en(o,a);$l("nodeHooks",{readOnly:!1,fields:a,addNode:E,delNode:P,addNodeRef:p,openPenal:x});const n=c=>{c.shiftKey&&(c.deltaY>0?r.value>50&&(r.value-=10):r.value<170&&(r.value+=10))},f=()=>{R()},m=()=>{const c={code:"test",name:"测试",icon:{name:"el:HomeFilled",color:"#409EFF"},process:o.value,form:{fields:a.value},version:1,sort:0,groupId:"",remark:""};ln(c)};return window.addEventListener("wheel",n),kl(()=>{window.removeEventListener("wheel",n)}),(c,_)=>{const b=Be,w=G;return V(),O("div",on,[$("div",tn,[e(b,{"inline-prompt":"","active-icon":u(Gl),"inactive-icon":u(Kl),onChange:v,modelValue:g.value,"onUpdate:modelValue":_[0]||(_[0]=F=>g.value=F)},null,8,["active-icon","inactive-icon","modelValue"])]),$("div",nn,[e(w,{icon:u(ze),onClick:_[1]||(_[1]=F=>r.value+=10),disabled:r.value>=170,circle:""},null,8,["icon","disabled"]),$("span",null,j(r.value)+"%",1),e(w,{icon:u(ml),onClick:_[2]||(_[2]=F=>r.value-=10),circle:"",disabled:r.value<=50},null,8,["icon","disabled"]),e(w,{onClick:f},{default:s(()=>[k("校验")]),_:1}),e(w,{onClick:m,type:"primary",icon:u(Xl)},{default:s(()=>[k("转bpmn")]),_:1},8,["icon"])]),$("div",an,[e(hl,{node:u(o)},null,8,["node"])]),e(Zt,{ref_key:"nodePenalRef",ref:i},null,512)])}}});const dn=A(rn,[["__scopeId","data-v-95776ddf"]]),un=S({__name:"App",setup(l){const d=U({id:"root",pid:null,type:"start",name:"发起人",formProperties:[],child:{id:"end",pid:"root",type:"end",name:"结束",child:null}}),t=U([{id:"field_da2w55",title:"请假人",name:"UserSelection",value:null,props:{multiple:!1,disabled:!1,placeholder:"请选择用户",style:{width:"100%"}}},{id:"field_fa2w40",title:"请假天数",name:"Number",value:null,props:{disabled:!1,placeholder:"请假天数",style:{width:"100%"},min:0,max:100,step:1,precision:0}},{id:"field_d42t45",title:"请假事由",name:"Select",value:null,props:{disabled:!1,multiple:!1,placeholder:"请选择请假事由",options:[{label:"事假",value:"事假"},{label:"病假",value:"病假"},{label:"婚假",value:"婚假"},{label:"产假",value:"产假"},{label:"丧假",value:"丧假"},{label:"其他",value:"其他"}],style:{width:"100%"}}},{id:"field_522g58",title:"请假原因",name:"Input",value:null,props:{type:"textarea",placeholder:"请输入请假原因",autosize:{minRows:3,maxRows:3},disabled:!1,style:{width:"100%"}}}]);return(o,a)=>{const i=Nl;return V(),C(i,{namespace:"el",locale:u(Fl)},{default:s(()=>[e(dn,{process:d.value,fields:t.value},null,8,["process","fields"])]),_:1},8,["locale"])}}});const Ee=[{id:1,name:"张三",username:"admin",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:2,name:"李四",username:"lisi",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:3,name:"王五",username:"wangwu",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:4,name:"赵六",username:"zhaoliu",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:5,name:"孙七",username:"sunqi",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:6,name:"周八",username:"zhouba",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:7,name:"吴九",username:"wujui",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:8,name:"郑十",username:"zhengshi",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"}],cn=[{url:"/api/user/info",method:"get",response:l=>{const d=l.query.username;return{code:200,success:!0,message:"操作成功",data:Ee.find(t=>t.username===d)}}},{url:"/api/user/list",method:"post",response:l=>{const d=l.body.userIds;return{code:200,success:!0,message:"操作成功",data:Array.isArray(d)?Ee.filter(t=>d.includes(t.username)):Ee}}}],Ce=[{id:"1",name:"项目经理"},{id:"2",name:"产品经理"},{id:"3",name:"高级开发工程师"},{id:"4",name:"中级开发工程师"},{id:"5",name:"项目总监"},{id:"6",name:"产品策划"},{id:"7",name:"客服"},{id:"8",name:"销售经理"}],pn=[{url:"/api/role/info",method:"get",response:l=>{const d=l.query.id;return{code:200,success:!0,message:"操作成功",data:Ce.find(t=>t.id===d)}}},{url:"/api/role/list",method:"post",response:l=>{const d=l.body.roleIds;return{code:200,success:!0,message:"操作成功",data:Array.isArray(d)?Ce.filter(t=>d.includes(t.id)):Ce}}}],fn=[...cn,...pn],_n=[...fn];function mn(){Zl(_n)}const vn=wl(un);vn.mount("#app");mn();
